{"version":3,"sources":["webpack:///./src/components/PermissionButton.vue?3e26","webpack:///src/components/PermissionButton.vue","webpack:///./src/components/PermissionButton.vue?bd7a","webpack:///./src/components/PermissionButton.vue","webpack:///./src/components/PermissionButton.vue?1aa2","webpack:///./src/views/device/bind/index.vue?cc49","webpack:///src/views/device/bind/index.vue","webpack:///./src/views/device/bind/index.vue?2144","webpack:///./src/views/device/bind/index.vue","webpack:///./src/api/device.js","webpack:///./src/views/device/bind/index.vue?9ebf"],"names":["render","_vm","this","_h","$createElement","_c","_self","isCheck","currentBtnRoute","staticClass","type","routeLink","attrs","_v","_s","title","_e","btnType","icon","disabled","loading","on","$emit","class","classname","staticRenderFns","component","this$1","handleBind","staticStyle","devicesTabList","devicesActiveTabKey","key","ref","devicesColumns","devices","rowSelection","locale","scopedSlots","_u","fn","status","record","_f","status_title","time","device_status","device_status_title","visible","confirmLoading","handleCancel","handleOk","saveBindPartner","formData","Request","promisePost","getUnboundPartnerDevices","params","get","editNvr","id","getNvrDevices","getIpcDevices","getStatusItems","getNvr","getDeviceRegisterLogs","promiseGet","getDeviceActiveLogs","batchDeleteIpc","ids","post","editIpc","batchSyncIpc","batchActiveIpc","batchLockIpc","batchOpenLiveIpc","batchCloseLiveIpc","getMediaServerList","batchUpdateMediaServer","mediaServerId","batchUpdateRtpProto","rtpProto","rtp_proto","nvrItems","batchBindRecorder","recorderId","videoOnlineList","videoSrc","url","ptzCtrl","mainId","command","main_id","command_type","liveUrl","batchBindRecordPlan","planId","ipcShow"],"mappings":"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","file":"js/chunk-f68e6a1e.7463534e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.isCheck || _vm.currentBtnRoute)?_c('div',{staticClass:\"permission-button\"},[('tab' === _vm.type && _vm.routeLink)?_c('div',[_c('router-link',{attrs:{\"to\":_vm.routeLink}},[_vm._v(_vm._s(_vm.title))])],1):_vm._e(),('modal' === _vm.type)?_c('div',[(_vm.useBtnTag)?_c('a-button',{attrs:{\"type\":_vm.btnType,\"icon\":_vm.icon,\"disabled\":_vm.disabled,\"loading\":_vm.loading},on:{\"click\":function () {\n          _vm.$emit('handle-click')\n        }}},[_vm._v(_vm._s(_vm.title))]):_c('span',{class:_vm.classname ? _vm.classname : 'edit-btn',on:{\"click\":function () {\n          _vm.$emit('handle-click')\n        }}},[_vm._v(\" \"+_vm._s(_vm.title))])],1):_vm._e(),('confirm' === _vm.type)?_c('div',[_c('span',{class:_vm.classname ? _vm.classname : 'del-btn',on:{\"click\":function () {\n          _vm.$emit('handle-confirm')\n        }}},[_vm._v(\" \"+_vm._s(_vm.title))])]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"permission-button\" v-if=\"!isCheck || currentBtnRoute\">\n    <div v-if=\"'tab' === type && routeLink\">\n      <router-link :to=\"routeLink\">{{ title }}</router-link>\n    </div>\n    <div v-if=\"'modal' === type\">\n      <a-button\n        :type=\"btnType\"\n        :icon=\"icon\"\n        :disabled=\"disabled\"\n        v-if=\"useBtnTag\"\n        @click=\"\n          () => {\n            $emit('handle-click')\n          }\n        \"\n        :loading=\"loading\"\n      >{{ title }}</a-button\n      >\n      <span\n        v-else\n        :class=\"classname ? classname : 'edit-btn'\"\n        @click=\"\n          () => {\n            $emit('handle-click')\n          }\n        \"\n      >\n        {{ title }}</span\n      >\n    </div>\n    <div v-if=\"'confirm' === type\">\n      <span\n        :class=\"classname ? classname : 'del-btn'\"\n        @click=\"\n          () => {\n            $emit('handle-confirm')\n          }\n        \"\n      >\n        {{ title }}</span\n      >\n    </div>\n  </div>\n</template>\n<script>\nimport { getRouteByCode } from '@/libs/utils'\nexport default {\n    name: 'PermissionButton',\n    props: {\n        routeLink: null,\n        type: {\n            type: String,\n            default: 'modal'\n        },\n        code: {\n            type: String,\n            default: ''\n        },\n        title: {\n            type: String,\n            default: ''\n        },\n        loading: {\n            type: Boolean,\n            default: false\n        },\n        icon: {\n            type: String,\n            default: 'plus'\n        },\n        useBtnTag: {\n            type: Boolean,\n            default: true\n        },\n        disabled: {\n            type: Boolean,\n            default: false\n        },\n        classname: {\n            type: String,\n            default: ''\n        },\n        btnType: {\n            type: String,\n            default: 'primary'\n        },\n        isCheck: {\n            type: Boolean,\n            default: true\n        },\n        confirm: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data () {\n        return {\n            currentBtnRoute: null\n        }\n    },\n    mounted () {\n        this.checkPermission()\n    },\n    methods: {\n        checkPermission () {\n            if (!this.isCheck) {\n                return\n            }\n            const vueRouters = this.$store.state.vueRouters.vueRouters\n            if (!this.code || !vueRouters) {\n                return\n            }\n\n            this.currentBtnRoute = getRouteByCode(vueRouters, this.code)\n        },\n        handleClick (e) {\n            this.$emit('bclick')\n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.del-btn,\n.edit-btn {\n    color: #1890ff;\n    cursor: pointer;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PermissionButton.vue?vue&type=template&id=3750c8b8&scoped=true&\"\nimport script from \"./PermissionButton.vue?vue&type=script&lang=js&\"\nexport * from \"./PermissionButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PermissionButton.vue?vue&type=style&index=0&id=3750c8b8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3750c8b8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionButton.vue?vue&type=style&index=0&id=3750c8b8&lang=less&scoped=true&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"table-operator\"},[_c('div',{staticClass:\"pull-right\"},[_c('permission-button',{attrs:{\"code\":\"device-save-bind\",\"title\":\"绑定合作方\",\"type\":\"modal\",\"btnType\":\"Primary\",\"icon\":\"swap\",\"disabled\":_vm.disabled},on:{\"handle-click\":_vm.handleBind}})],1)]),_c('a-card',{staticStyle:{\"margin-top\":\"24px\"},attrs:{\"bordered\":false,\"tabList\":_vm.devicesTabList,\"activeTabKey\":_vm.devicesActiveTabKey},on:{\"tabChange\":function (key) {\n        this$1.devicesActiveTabKey = key\n      }}},[(_vm.devicesActiveTabKey === '1')?_c('a-table',{ref:\"table1\",attrs:{\"columns\":_vm.devicesColumns[0],\"dataSource\":_vm.devices,\"pagination\":true,\"loading\":_vm.loading,\"rowSelection\":_vm.rowSelection,\"locale\":_vm.locale,\"rowKey\":\"id\"},scopedSlots:_vm._u([{key:\"status\",fn:function(status, record){return [_c('a-badge',{attrs:{\"status\":_vm._f(\"statusTypeFilter\")(status),\"text\":record.status_title}})]}},{key:\"time\",fn:function(time){return _c('span',{},[_vm._v(_vm._s(_vm._f(\"filterTime\")(time,time)))])}}],null,false,4022782484)}):_vm._e(),(_vm.devicesActiveTabKey === '2')?_c('a-table',{ref:\"table2\",attrs:{\"columns\":_vm.devicesColumns[1],\"dataSource\":_vm.devices,\"pagination\":true,\"loading\":_vm.loading,\"rowSelection\":_vm.rowSelection,\"locale\":_vm.locale,\"rowKey\":\"id\"},scopedSlots:_vm._u([{key:\"status\",fn:function(device_status, record){return [_c('a-badge',{attrs:{\"status\":_vm._f(\"statusTypeFilter\")(device_status),\"text\":record.device_status_title}})]}},{key:\"time\",fn:function(time){return _c('span',{},[_vm._v(_vm._s(_vm._f(\"filterTime\")(time,time)))])}}],null,false,678095155)}):_vm._e()],1),_c('bind-form',{ref:\"bindFormModal\",attrs:{\"visible\":_vm.visible,\"loading\":_vm.confirmLoading},on:{\"cancel\":_vm.handleCancel,\"ok\":_vm.handleOk}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 操作 -->\n    <div class=\"table-operator\">\n      <div class=\"pull-right\">\n        <permission-button\n          code=\"device-save-bind\"\n          title=\"绑定合作方\"\n          @handle-click=\"handleBind\"\n          type=\"modal\"\n          btnType=\"Primary\"\n          icon=\"swap\"\n          :disabled=\"disabled\"\n        />\n      </div>\n    </div>\n    <a-card\n      style=\"margin-top: 24px\"\n      :bordered=\"false\"\n      :tabList=\"devicesTabList\"\n      :activeTabKey=\"devicesActiveTabKey\"\n      @tabChange=\"\n        (key) => {\n          this.devicesActiveTabKey = key\n        }\n      \"\n    >\n      <a-table\n        v-if=\"devicesActiveTabKey === '1'\"\n        :columns=\"devicesColumns[0]\"\n        :dataSource=\"devices\"\n        :pagination=\"true\"\n        :loading=\"loading\"\n        :rowSelection=\"rowSelection\"\n        :locale=\"locale\"\n        rowKey=\"id\"\n        ref=\"table1\"\n      >\n        <template slot=\"status\" slot-scope=\"status, record\">\n          <a-badge :status=\"status | statusTypeFilter\" :text=\"record.status_title\" />\n        </template>\n        <span slot=\"time\" slot-scope=\"time\">{{ time | filterTime(time) }}</span>\n      </a-table>\n      <a-table\n        v-if=\"devicesActiveTabKey === '2'\"\n        :columns=\"devicesColumns[1]\"\n        :dataSource=\"devices\"\n        :pagination=\"true\"\n        :loading=\"loading\"\n        :rowSelection=\"rowSelection\"\n        :locale=\"locale\"\n        rowKey=\"id\"\n        ref=\"table2\"\n      >\n        <template slot=\"status\" slot-scope=\"device_status, record\">\n          <a-badge :status=\"device_status | statusTypeFilter\" :text=\"record.device_status_title\" />\n        </template>\n        <span slot=\"time\" slot-scope=\"time\">{{ time | filterTime(time) }}</span>\n      </a-table>\n    </a-card>\n    <bind-form\n      ref=\"bindFormModal\"\n      :visible=\"visible\"\n      :loading=\"confirmLoading\"\n      @cancel=\"handleCancel\"\n      @ok=\"handleOk\"\n    />\n  </div>\n</template>\n\n<script>\nimport moment from 'moment'\nimport { message } from 'ant-design-vue'\nimport { saveBindPartner, getUnboundPartnerDevices } from '@/api/device'\nimport PermissionButton from '@/components/PermissionButton.vue'\nexport default {\n    name: 'DeviceBind',\n    data () {\n        return {\n            visible: false,\n            confirmLoading: false,\n            disabled: true,\n            devicesTabList: [\n                {\n                    key: '1',\n                    tab: '录像机'\n                },\n                {\n                    key: '2',\n                    tab: '摄像头'\n                }\n            ],\n            locale: {\n              filterConfirm: '确定',\n              filterReset: '重置',\n              emptyText: '暂无可认领设备'\n            },\n            devicesActiveTabKey: '1',\n            devicesColumns: [\n                [\n                    {\n                        title: '设备名称',\n                        dataIndex: 'device_name',\n                        key: 'device_name'\n                    },\n                    {\n                        title: '设备编码ID',\n                        dataIndex: 'device_id',\n                        key: 'device_id'\n                    },\n                    {\n                        title: '通道数',\n                        dataIndex: 'channel_num',\n                        key: 'channel_num'\n                    },\n                    {\n                        title: '设备状态',\n                        dataIndex: 'status',\n                        key: 'status',\n                        scopedSlots: { customRender: 'status' }\n                    },\n                    {\n                        title: '制造商',\n                        dataIndex: 'manufacturer',\n                        key: 'manufacturer'\n                    },\n                    {\n                        title: '模型',\n                        dataIndex: 'device_model',\n                        key: 'device_model'\n                    },\n                    {\n                        title: '固件版本',\n                        dataIndex: 'firmware',\n                        key: 'firmware'\n                    },\n                    {\n                        title: '设备所在地',\n                        dataIndex: 'address',\n                        key: 'address'\n                    },\n                    {\n                        title: '创建时间',\n                        dataIndex: 'createdTime',\n                        key: 'createdTime',\n                        scopedSlots: { customRender: 'time' }\n                    }\n                ],\n                [\n                    {\n                        title: '通道名称',\n                        dataIndex: 'channel_name',\n                        key: 'channel_name'\n                    },\n                    {\n                        title: '设备编码ID',\n                        dataIndex: 'main_id',\n                        key: 'main_id'\n                    },\n                    {\n                        title: '设备序列号',\n                        dataIndex: 'device_id',\n                        key: 'device_id'\n                    },\n                    {\n                        title: '通道序列号',\n                        dataIndex: 'channel_id',\n                        key: 'channel_id'\n                    },\n                    {\n                        title: 'Ip地址',\n                        dataIndex: 'ip_v4_address',\n                        key: 'ip_v4_address'\n                    },\n                    {\n                        title: '设备状态',\n                        dataIndex: 'device_status',\n                        key: 'device_status',\n                        scopedSlots: { customRender: 'status' }\n                    },\n                    {\n                        title: '创建时间',\n                        dataIndex: 'createdTime',\n                        key: 'createdTime',\n                        scopedSlots: { customRender: 'time' }\n                    }\n                ]\n            ],\n            devices: [],\n            loading: false,\n            selectedRowKeys: [],\n            selectedRows: [],\n            queryParams: {\n                type: '',\n                limit: 32\n            }\n        }\n    },\n    components: {\n        PermissionButton,\n        bindForm: () => import('./Form.vue')\n    },\n    mounted () {\n        this.loadData('nvr')\n    },\n    computed: {\n        rowSelection () {\n            return {\n                selectedRowKeys: this.selectedRowKeys,\n                onChange: this.onSelectChange\n            }\n        }\n    },\n    methods: {\n        async loadData (type) {\n          this.queryParams.type = type\n          this.loading = true\n          const { devices, paginator } = await getUnboundPartnerDevices(this.queryParams)\n          this.devices = devices\n          this.paginator = paginator\n          this.loading = false\n        },\n        handleCancel () {\n            this.visible = false\n        },\n        handleOk () {\n            const model = this.$refs.bindFormModal.model\n            model.target_type = this.devicesActiveTabKey === '1' ? 'nvr' : 'ipc'\n            this.confirmLoading = true\n            model.ids = this.selectedRowKeys\n            this.$refs.bindFormModal.$refs.bindForm.validate((valid) => {\n                if (!valid) {\n                    return false\n                }\n                if (!model.id) {\n                    saveBindPartner(model).then((response) => {\n                        message.success('保存成功')\n                        this.visible = false\n                        this.confirmLoading = false\n                        this.refresh()\n                    })\n                }\n            })\n        },\n        refresh () {\n          if (this.devicesActiveTabKey === '1') {\n            this.loadData('nvr')\n          } else {\n            this.loadData('ipc')\n          }\n          this.resetData()\n        },\n        handleBind () {\n          this.$refs.bindFormModal.resetForm()\n          this.visible = true\n          this.confirmLoading = false\n        },\n        onSelectChange (selectedRowKeys, selectedRows) {\n            this.selectedRowKeys = selectedRowKeys\n            this.selectedRows = selectedRows\n            this.disabled = false\n        },\n        resetData () {\n          this.selectedRowKeys = []\n          this.selectedRows = []\n          this.disabled = true\n          this.queryParams = {\n            limit: 32,\n            type: ''\n          }\n        }\n    },\n    filters: {\n        filterTime (time) {\n            return moment(time).format('YYYY-MM-DD HH:mm')\n        },\n        statusTypeFilter (type) {\n            const statusTypeMap = {\n                0: 'warning',\n                '-1': 'error',\n                1: 'success'\n            }\n            return statusTypeMap[type]\n        }\n    },\n    watch: {\n      devicesActiveTabKey (newVal, oldVal) {\n        this.resetData()\n        if (newVal === '1') {\n          this.loadData('nvr')\n        } else {\n          this.loadData('ipc')\n        }\n      }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.detail-layout {\n    margin-left: 44px;\n}\n.text {\n    color: rgba(0, 0, 0, 0.45);\n}\n\n.heading {\n    color: rgba(0, 0, 0, 0.85);\n    font-size: 20px;\n}\n\n.no-data {\n    color: rgba(0, 0, 0, 0.25);\n    text-align: center;\n    line-height: 64px;\n    font-size: 16px;\n\n    i {\n        font-size: 24px;\n        margin-right: 16px;\n        position: relative;\n        top: 3px;\n    }\n}\n\n.mobile {\n    .detail-layout {\n        margin-left: unset;\n    }\n    .text {\n    }\n    .status-list {\n        text-align: left;\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b96ef940&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=b96ef940&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b96ef940\",\n  null\n  \n)\n\nexport default component.exports","import Request from '@/axios/request'\n\nexport function saveBindPartner (formData) {\n    return Request.promisePost('device/saveBindPartner', formData)\n}\n\nexport function getUnboundPartnerDevices (params = {}) {\n    return Request.get('device/unboundPartnerDevices', {\n        params\n    })\n}\n\nexport function editNvr (id, formData) {\n    return Request.promisePost('device/editNvr', formData, { params: { id: id } })\n}\n\nexport function getNvrDevices (params = {}) {\n    return Request.get('device/nvrDevices', { params })\n}\n\nexport function getThirdPartyNvrTree (params = {}) {\n    return Request.get('device/nvrDevices', { params })\n}\n\nexport function getIpcDevices (params = {}) {\n    return Request.get('device/ipcDevices', { params })\n}\n\nexport function getStatusItems () {\n    return Request.get('device/statusItems')\n}\n\nexport function getNvr (id) {\n    return Request.get('device/nvrShow', { params: { id: id } })\n}\n\nexport function getDeviceRegisterLogs (params = {}) {\n    return Request.promiseGet('device/registerLogs', { params })\n}\n\nexport function getDeviceActiveLogs (params = {}) {\n    return Request.promiseGet('device/activeLogs', { params })\n}\n\nexport function batchDeleteIpc (ids) {\n    return Request.post('device/batchDeleteIpc', { ids: ids })\n}\n\nexport function editIpc (id, formData) {\n    return Request.promisePost('device/editIpc', formData, { params: { id: id } })\n}\n\nexport function batchSyncIpc (ids) {\n    return Request.post('device/batchSyncIpc', { ids: ids })\n}\n\nexport function batchActiveIpc (ids) {\n    return Request.post('device/batchActiveIpc', { ids: ids })\n}\n\nexport function batchLockIpc (ids) {\n    return Request.post('device/batchLockIpc', { ids: ids })\n}\n\nexport function batchOpenLiveIpc (ids) {\n    return Request.post('device/batchOpenLiveIpc', { ids: ids })\n}\n\nexport function batchCloseLiveIpc (ids) {\n    return Request.post('device/batchCloseLiveIpc', { ids: ids })\n}\n\nexport function getMediaServerList () {\n    return Request.get('device/mediaServerList')\n}\n\nexport function batchUpdateMediaServer (ids, mediaServerId) {\n    return Request.post('device/batchUpdateMediaServer', { ids: ids, mediaServerId: mediaServerId })\n}\nexport function batchUpdateRtpProto (ids, rtpProto) {\n    return Request.post('device/batchUpdateRtpProto', { ids: ids, rtp_proto: rtpProto })\n}\n\nexport function nvrItems (params = {}) {\n    return Request.get('device/nvrItems', { params })\n}\n\nexport function batchBindRecorder (ids, recorderId) {\n    return Request.post('device/batchBindRecorder', { ids: ids, recorderId: recorderId })\n}\n\nexport function videoOnlineList (params = {}) {\n    return Request.get('device/videoOnlineList', { params })\n}\n\nexport function videoSrc (mediaServerId, url) {\n    return Request.get('device/videoCover', {\n        params: {\n            mediaServerId: mediaServerId,\n            url: url\n        }\n    })\n}\n\nexport function ptzCtrl (mainId, command) {\n  return Request.post('device/ptzCtrl', { main_id: mainId, command_type: command })\n}\n\nexport function liveUrl (mainId) {\n  return Request.post('device/liveUrl', { main_id: mainId })\n}\n\nexport function batchBindRecordPlan (ids, planId) {\n  return Request.promisePost('device/batchBindRecordPlan', { ids: ids, planId: planId })\n}\n\nexport function ipcShow(id) {\n    return Request.get('device/ipcShow', { params: { id: id } })\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=b96ef940&lang=less&scoped=true&\""],"sourceRoot":""}