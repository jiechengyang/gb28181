(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0471fa03"],{"60fc":function(e,r,t){"use strict";t("fb4b")},6351:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-form-model",e._b({ref:"akForm",attrs:{model:e.form,rules:e.rules}},"a-form-model",e.formItemLayout,!1),[t("a-form-model-item",{attrs:{label:"开启调试",prop:"debug"}},[t("a-radio-group",{on:{change:e.onChange},model:{value:e.form.debug,callback:function(r){e.$set(e.form,"debug",r)},expression:"form.debug"}},[t("a-radio",{attrs:{value:"1"}},[e._v("开启")]),t("a-radio",{attrs:{value:"0"}},[e._v("关闭")])],1)],1),t("a-form-model-item",{attrs:{label:"网关服务api地址",prop:"api_url"}},[t("a-input",{attrs:{placeholder:"以'http://'或'https://'头"},model:{value:e.form.api_url,callback:function(r){e.$set(e.form,"api_url",r)},expression:"form.api_url"}})],1),t("a-form-model-item",{attrs:{label:"ACCESS KEY",prop:"access_key",help:"请保持与网关配置一致"}},[t("a-input",{attrs:{placeholder:"ACCESS KEY"},model:{value:e.form.access_key,callback:function(r){e.$set(e.form,"access_key",r)},expression:"form.access_key"}})],1),t("a-form-model-item",{attrs:{label:"流媒体代理配置",prop:"media_server_id"}},[t("a-select",{attrs:{placeholder:"请选择服务节点"},on:{change:e.onMediaServerChange},model:{value:e.media_server_id,callback:function(r){e.media_server_id=r},expression:"media_server_id"}},[t("a-select-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.mediaServerItems,(function(r,n){return t("a-select-option",{key:n,attrs:{value:r}},[e._v(e._s(r))])}))],2)],1),t("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:e.show_proxy_input,expression:"show_proxy_input"}],attrs:{label:"代理地址"}},[t("a-input",{attrs:{placeholder:"以'http://'或'https://'头"},model:{value:e.proxy_url,callback:function(r){e.proxy_url=r},expression:"proxy_url"}})],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:12,offset:6}}},[t("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)},i=[],o=t("1da1"),a=(t("96cf"),t("ac1f"),t("00b4"),t("e572")),u=t("aa98"),c=t("90e7"),s={data:function(){return{form:{api_url:"",access_key:"",media_server_proxy:{},debug:"0"},show_proxy_input:!1,proxy_url:"",media_server_id:"",mediaServerItems:[],formItemLayout:{labelCol:{span:6},wrapperCol:{span:14}},rules:{access_key:[{required:!0,message:"AK_ACCESS_KEY必须填写",trigger:"blur"}],api_url:[{required:!0,message:"网关服务api地址必须填写",trigger:"blur"}]}}},mounted:function(){this.loadmediaServerItems(),this.getAkServerValue()},methods:{loadmediaServerItems:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["p"])();case 2:e.mediaServerItems=r.sent;case 3:case"end":return r.stop()}}),r)})))()},getAkServerValue:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["d"])();case 2:t=r.sent,e.form=t,e.form.hasOwnProperty("media_server_proxy")||(e.form.media_server_proxy={});case 5:case"end":return r.stop()}}),r)})))()},onSubmit:function(){var e=this;this.$refs.akForm.validate((function(r){if(!r)return!1;if(e.proxy_url){if(!a["g"].URL.test(e.proxy_url))return e.$message.error("请输入正确的代理地址"),!1;e.form.media_server_proxy[e.media_server_id]=e.proxy_url,e.proxy_url=""}Object(c["a"])(e.form).then((function(r){e.$message.success("保存成功")}))}))},onChange:function(e){this.form.debug=e.target.value},onMediaServerChange:function(e){this.media_server_id?(this.show_proxy_input=!0,this.proxy_url=this.form.media_server_proxy[this.media_server_id]?this.form.media_server_proxy[this.media_server_id]:""):this.show_proxy_input=!1}}},d=s,p=(t("60fc"),t("2877")),f=Object(p["a"])(d,n,i,!1,null,null,null);r["default"]=f.exports},aa98:function(e,r,t){"use strict";t.d(r,"y",(function(){return i})),t.d(r,"t",(function(){return o})),t.d(r,"l",(function(){return a})),t.d(r,"r",(function(){return u})),t.d(r,"o",(function(){return c})),t.d(r,"s",(function(){return s})),t.d(r,"q",(function(){return d})),t.d(r,"n",(function(){return p})),t.d(r,"m",(function(){return f})),t.d(r,"e",(function(){return m})),t.d(r,"k",(function(){return l})),t.d(r,"h",(function(){return v})),t.d(r,"a",(function(){return _})),t.d(r,"f",(function(){return b})),t.d(r,"g",(function(){return h})),t.d(r,"d",(function(){return g})),t.d(r,"p",(function(){return y})),t.d(r,"i",(function(){return x})),t.d(r,"j",(function(){return w})),t.d(r,"w",(function(){return k})),t.d(r,"c",(function(){return S})),t.d(r,"z",(function(){return I})),t.d(r,"A",(function(){return C})),t.d(r,"x",(function(){return L})),t.d(r,"v",(function(){return O})),t.d(r,"b",(function(){return P})),t.d(r,"u",(function(){return A}));var n=t("28de");function i(e){return n["b"].promisePost("device/saveBindPartner",e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("device/unboundPartnerDevices",{params:e})}function a(e,r){return n["b"].promisePost("device/editNvr",r,{params:{id:e}})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("device/nvrDevices",{params:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("device/ipcDevices",{params:e})}function s(){return n["b"].get("device/statusItems")}function d(e){return n["b"].get("device/nvrShow",{params:{id:e}})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].promiseGet("device/registerLogs",{params:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].promiseGet("device/activeLogs",{params:e})}function m(e){return n["b"].post("device/batchDeleteIpc",{ids:e})}function l(e,r){return n["b"].promisePost("device/editIpc",r,{params:{id:e}})}function v(e){return n["b"].post("device/batchSyncIpc",{ids:e})}function _(e){return n["b"].post("device/batchActiveIpc",{ids:e})}function b(e){return n["b"].post("device/batchLockIpc",{ids:e})}function h(e){return n["b"].post("device/batchOpenLiveIpc",{ids:e})}function g(e){return n["b"].post("device/batchCloseLiveIpc",{ids:e})}function y(){return n["b"].get("device/mediaServerList")}function x(e,r){return n["b"].post("device/batchUpdateMediaServer",{ids:e,mediaServerId:r})}function w(e,r){return n["b"].post("device/batchUpdateRtpProto",{ids:e,rtp_proto:r})}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("device/nvrItems",{params:e})}function S(e,r){return n["b"].post("device/batchBindRecorder",{ids:e,recorderId:r})}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("device/videoOnlineList",{params:e})}function C(e,r){return n["b"].get("device/videoCover",{params:{mediaServerId:e,url:r}})}function L(e,r){return n["b"].post("device/ptzCtrl",{main_id:e,command_type:r})}function O(e){return n["b"].post("device/liveUrl",{main_id:e})}function P(e,r){return n["b"].promisePost("device/batchBindRecordPlan",{ids:e,planId:r})}function A(e){return n["b"].get("device/ipcShow",{params:{id:e}})}},fb4b:function(e,r,t){}}]);
//# sourceMappingURL=chunk-0471fa03.20cba41b.js.map