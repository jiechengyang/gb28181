(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8d2d00a"],{"0376":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return!e.isCheck||e.currentBtnRoute?i("div",{staticClass:"permission-button"},["tab"===e.type&&e.routeLink?i("div",[i("router-link",{attrs:{to:e.routeLink}},[e._v(e._s(e.title))])],1):e._e(),"modal"===e.type?i("div",[e.useBtnTag?i("a-button",{attrs:{type:e.btnType,icon:e.icon,disabled:e.disabled,loading:e.loading},on:{click:function(){e.$emit("handle-click")}}},[e._v(e._s(e.title))]):i("span",{class:e.classname?e.classname:"edit-btn",on:{click:function(){e.$emit("handle-click")}}},[e._v(" "+e._s(e.title))])],1):e._e(),"confirm"===e.type?i("div",[i("span",{class:e.classname?e.classname:"del-btn",on:{click:function(){e.$emit("handle-confirm")}}},[e._v(" "+e._s(e.title))])]):e._e()]):e._e()},a=[],s=i("90fe"),r={name:"PermissionButton",props:{routeLink:null,type:{type:String,default:"modal"},code:{type:String,default:""},title:{type:String,default:""},loading:{type:Boolean,default:!1},icon:{type:String,default:"plus"},useBtnTag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},classname:{type:String,default:""},btnType:{type:String,default:"primary"},isCheck:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1}},data:function(){return{currentBtnRoute:null}},mounted:function(){this.checkPermission()},methods:{checkPermission:function(){if(this.isCheck){var e=this.$store.state.vueRouters.vueRouters;this.code&&e&&(this.currentBtnRoute=Object(s["j"])(e,this.code))}},handleClick:function(e){this.$emit("bclick")}}},o=r,c=(i("226f"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,"3750c8b8",null);t["a"]=l.exports},"226f":function(e,t,i){"use strict";i("d754")},ac16:function(e,t,i){e.exports=i.p+"img/none-cover.0ea3828d.png"},aef7:function(e,t,i){"use strict";i("d30b")},d30b:function(e,t,i){},d754:function(e,t,i){},e906:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isTopView?i("div",{staticClass:"video-container"},[i("a-card",{staticClass:"ant-pro-components-tag-select",attrs:{bordered:!1}},[i("a-form",{attrs:{form:e.form,layout:"inline"}},[i("a-form-item",[i("a-input-search",{staticStyle:{"margin-bottom":"8px",width:"400px"},attrs:{placeholder:"精确查询：输入设备唯一编码","enter-button":"","allow-clear":""},on:{search:e.onChange}})],1)],1)],1),i("div",{staticClass:"ant-pro-pages-list-projects-cardList"},[i("a-list",{attrs:{loading:e.loading,"data-source":e.videos,pagination:!0,grid:{gutter:24,xl:4,lg:3,md:3,sm:2,xs:1}},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{},[i("a-card",{staticClass:"ant-pro-pages-list-projects-card",attrs:{hoverable:""},on:{click:function(i){return e.jumpPlay(t.main_id,t.play_url)}}},[t.cover?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"item.cover"}],staticClass:"cover",attrs:{slot:"cover",alt:t.main_id},slot:"cover"}):i("img",{staticClass:"cover",attrs:{slot:"cover",src:e.defaultCover,alt:t.main_id},slot:"cover"}),i("a-card-meta",{attrs:{title:t.device_id+"-("+t.main_id+")"}},[i("template",{slot:"description"},[i("ellipsis",{attrs:{length:30}},[e._v(e._s(t.channel_name)+"("+e._s(t.channel_id)+")")])],1)],2)],1)],1)}}],null,!1,1978141927)})],1)],1):i("router-view")},a=[],s=i("1da1"),r=(i("d3b7"),i("ddb0"),i("96cf"),i("0376")),o=i("aa98"),c=i("2af9"),l=i("c1df"),u=i.n(l),d=i("90fe"),m={components:{Ellipsis:c["b"],PermissionButton:r["a"]},data:function(){return{timer:null,defaultCover:i("ac16"),queryParams:{mainId:""},videos:[],videoCovers:[],form:this.$form.createForm(this),loading:!1,hasVideoPlayPermission:!1}},computed:{isTopView:function(){return"/device/videos"===this.$route.path}},filters:{fromNow:function(e){return u()(e).fromNow()}},mounted:function(){this.isTopView&&(this.getList(),this.checkPermissions(),this.timingTask())},beforeDestroy:function(){this.clearTimer()},methods:{checkPermissions:function(){var e=this.$store.state.vueRouters.vueRouters,t=Object(d["j"])(e,"videos-play");t&&(this.hasVideoPlayPermission=!0)},clearTimer:function(){this.timer&&clearInterval(this.timer)},timingTask:function(){var e=this;this.clearTimer(),this.timer=setInterval((function(){e.getList()}),6e4)},jumpPlay:function(e,t){this.hasVideoPlayPermission&&this.$router.push({path:"/videos/".concat(e,"/play"),query:{mainId:e,playUrls:t}})},onChange:function(e){this.queryParams.mainId=e,this.getList()},handleChange:function(e){console.log("selected ".concat(e))},sleep:function(e){var t=new Date,i=t.getTime()+e;while(1)if(t=new Date,t.getTime()>i)return},getList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(o["z"])(e.queryParams);case 3:i=t.sent,e.videos=i,e.loading=!1,setTimeout((function(){e.getVideoCovers()}),1e3);case 7:case"end":return t.stop()}}),t)})))()},getVideoCovers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(e.videos);case 1:if((t.t1=t.t0()).done){t.next=12;break}return i=t.t1.value,n=e.videos[i],t.next=6,Object(o["A"])(n.media_server_id,n.play_url[3]);case 6:a=t.sent,s=a.cover,n.cover=s,e.$set(e.videos,i,n),t.next=1;break;case 12:case"end":return t.stop()}}),t)})))()}}},f=m,p=(i("aef7"),i("2877")),h=Object(p["a"])(f,n,a,!1,null,"c77c3a8a",null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-d8d2d00a.d8a1f921.js.map