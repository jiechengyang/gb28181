(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f68e6a1e"],{"0376":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.isCheck||e.currentBtnRoute?n("div",{staticClass:"permission-button"},["tab"===e.type&&e.routeLink?n("div",[n("router-link",{attrs:{to:e.routeLink}},[e._v(e._s(e.title))])],1):e._e(),"modal"===e.type?n("div",[e.useBtnTag?n("a-button",{attrs:{type:e.btnType,icon:e.icon,disabled:e.disabled,loading:e.loading},on:{click:function(){e.$emit("handle-click")}}},[e._v(e._s(e.title))]):n("span",{class:e.classname?e.classname:"edit-btn",on:{click:function(){e.$emit("handle-click")}}},[e._v(" "+e._s(e.title))])],1):e._e(),"confirm"===e.type?n("div",[n("span",{class:e.classname?e.classname:"del-btn",on:{click:function(){e.$emit("handle-confirm")}}},[e._v(" "+e._s(e.title))])]):e._e()]):e._e()},a=[],r=n("90fe"),c={name:"PermissionButton",props:{routeLink:null,type:{type:String,default:"modal"},code:{type:String,default:""},title:{type:String,default:""},loading:{type:Boolean,default:!1},icon:{type:String,default:"plus"},useBtnTag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},classname:{type:String,default:""},btnType:{type:String,default:"primary"},isCheck:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1}},data:function(){return{currentBtnRoute:null}},mounted:function(){this.checkPermission()},methods:{checkPermission:function(){if(this.isCheck){var e=this.$store.state.vueRouters.vueRouters;this.code&&e&&(this.currentBtnRoute=Object(r["j"])(e,this.code))}},handleClick:function(e){this.$emit("bclick")}}},d=c,s=(n("226f"),n("2877")),o=Object(s["a"])(d,i,a,!1,null,"3750c8b8",null);t["a"]=o.exports},"0ea1":function(e,t,n){},"226f":function(e,t,n){"use strict";n("d754")},3191:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("div",{staticClass:"table-operator"},[i("div",{staticClass:"pull-right"},[i("permission-button",{attrs:{code:"device-save-bind",title:"绑定合作方",type:"modal",btnType:"Primary",icon:"swap",disabled:t.disabled},on:{"handle-click":t.handleBind}})],1)]),i("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1,tabList:t.devicesTabList,activeTabKey:t.devicesActiveTabKey},on:{tabChange:function(t){e.devicesActiveTabKey=t}}},["1"===t.devicesActiveTabKey?i("a-table",{ref:"table1",attrs:{columns:t.devicesColumns[0],dataSource:t.devices,pagination:!0,loading:t.loading,rowSelection:t.rowSelection,locale:t.locale,rowKey:"id"},scopedSlots:t._u([{key:"status",fn:function(e,n){return[i("a-badge",{attrs:{status:t._f("statusTypeFilter")(e),text:n.status_title}})]}},{key:"time",fn:function(e){return i("span",{},[t._v(t._s(t._f("filterTime")(e,e)))])}}],null,!1,4022782484)}):t._e(),"2"===t.devicesActiveTabKey?i("a-table",{ref:"table2",attrs:{columns:t.devicesColumns[1],dataSource:t.devices,pagination:!0,loading:t.loading,rowSelection:t.rowSelection,locale:t.locale,rowKey:"id"},scopedSlots:t._u([{key:"status",fn:function(e,n){return[i("a-badge",{attrs:{status:t._f("statusTypeFilter")(e),text:n.device_status_title}})]}},{key:"time",fn:function(e){return i("span",{},[t._v(t._s(t._f("filterTime")(e,e)))])}}],null,!1,678095155)}):t._e()],1),i("bind-form",{ref:"bindFormModal",attrs:{visible:t.visible,loading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleOk}})],1)},a=[],r=n("1da1"),c=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("c1df")),d=n.n(c),s=n("f64c"),o=n("aa98"),u=n("0376"),l={name:"DeviceBind",data:function(){return{visible:!1,confirmLoading:!1,disabled:!0,devicesTabList:[{key:"1",tab:"录像机"},{key:"2",tab:"摄像头"}],locale:{filterConfirm:"确定",filterReset:"重置",emptyText:"暂无可认领设备"},devicesActiveTabKey:"1",devicesColumns:[[{title:"设备名称",dataIndex:"device_name",key:"device_name"},{title:"设备编码ID",dataIndex:"device_id",key:"device_id"},{title:"通道数",dataIndex:"channel_num",key:"channel_num"},{title:"设备状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"制造商",dataIndex:"manufacturer",key:"manufacturer"},{title:"模型",dataIndex:"device_model",key:"device_model"},{title:"固件版本",dataIndex:"firmware",key:"firmware"},{title:"设备所在地",dataIndex:"address",key:"address"},{title:"创建时间",dataIndex:"createdTime",key:"createdTime",scopedSlots:{customRender:"time"}}],[{title:"通道名称",dataIndex:"channel_name",key:"channel_name"},{title:"设备编码ID",dataIndex:"main_id",key:"main_id"},{title:"设备序列号",dataIndex:"device_id",key:"device_id"},{title:"通道序列号",dataIndex:"channel_id",key:"channel_id"},{title:"Ip地址",dataIndex:"ip_v4_address",key:"ip_v4_address"},{title:"设备状态",dataIndex:"device_status",key:"device_status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createdTime",key:"createdTime",scopedSlots:{customRender:"time"}}]],devices:[],loading:!1,selectedRowKeys:[],selectedRows:[],queryParams:{type:"",limit:32}}},components:{PermissionButton:u["a"],bindForm:function(){return n.e("chunk-6f6a8b91").then(n.bind(null,"dd98"))}},mounted:function(){this.loadData("nvr")},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{loadData:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.queryParams.type=e,t.loading=!0,n.next=4,Object(o["t"])(t.queryParams);case 4:i=n.sent,a=i.devices,r=i.paginator,t.devices=a,t.paginator=r,t.loading=!1;case 10:case"end":return n.stop()}}),n)})))()},handleCancel:function(){this.visible=!1},handleOk:function(){var e=this,t=this.$refs.bindFormModal.model;t.target_type="1"===this.devicesActiveTabKey?"nvr":"ipc",this.confirmLoading=!0,t.ids=this.selectedRowKeys,this.$refs.bindFormModal.$refs.bindForm.validate((function(n){if(!n)return!1;t.id||Object(o["y"])(t).then((function(t){s["a"].success("保存成功"),e.visible=!1,e.confirmLoading=!1,e.refresh()}))}))},refresh:function(){"1"===this.devicesActiveTabKey?this.loadData("nvr"):this.loadData("ipc"),this.resetData()},handleBind:function(){this.$refs.bindFormModal.resetForm(),this.visible=!0,this.confirmLoading=!1},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t,this.disabled=!1},resetData:function(){this.selectedRowKeys=[],this.selectedRows=[],this.disabled=!0,this.queryParams={limit:32,type:""}}},filters:{filterTime:function(e){return d()(e).format("YYYY-MM-DD HH:mm")},statusTypeFilter:function(e){var t={0:"warning","-1":"error",1:"success"};return t[e]}},watch:{devicesActiveTabKey:function(e,t){this.resetData(),"1"===e?this.loadData("nvr"):this.loadData("ipc")}}},f=l,v=(n("c451"),n("2877")),m=Object(v["a"])(f,i,a,!1,null,"b96ef940",null);t["default"]=m.exports},aa98:function(e,t,n){"use strict";n.d(t,"y",(function(){return a})),n.d(t,"t",(function(){return r})),n.d(t,"l",(function(){return c})),n.d(t,"r",(function(){return d})),n.d(t,"o",(function(){return s})),n.d(t,"s",(function(){return o})),n.d(t,"q",(function(){return u})),n.d(t,"n",(function(){return l})),n.d(t,"m",(function(){return f})),n.d(t,"e",(function(){return v})),n.d(t,"k",(function(){return m})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return g})),n.d(t,"p",(function(){return _})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return w})),n.d(t,"w",(function(){return I})),n.d(t,"c",(function(){return S})),n.d(t,"z",(function(){return T})),n.d(t,"A",(function(){return x})),n.d(t,"x",(function(){return R})),n.d(t,"v",(function(){return C})),n.d(t,"b",(function(){return B})),n.d(t,"u",(function(){return D}));var i=n("28de");function a(e){return i["b"].promisePost("device/saveBindPartner",e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].get("device/unboundPartnerDevices",{params:e})}function c(e,t){return i["b"].promisePost("device/editNvr",t,{params:{id:e}})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].get("device/nvrDevices",{params:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].get("device/ipcDevices",{params:e})}function o(){return i["b"].get("device/statusItems")}function u(e){return i["b"].get("device/nvrShow",{params:{id:e}})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].promiseGet("device/registerLogs",{params:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].promiseGet("device/activeLogs",{params:e})}function v(e){return i["b"].post("device/batchDeleteIpc",{ids:e})}function m(e,t){return i["b"].promisePost("device/editIpc",t,{params:{id:e}})}function p(e){return i["b"].post("device/batchSyncIpc",{ids:e})}function b(e){return i["b"].post("device/batchActiveIpc",{ids:e})}function h(e){return i["b"].post("device/batchLockIpc",{ids:e})}function y(e){return i["b"].post("device/batchOpenLiveIpc",{ids:e})}function g(e){return i["b"].post("device/batchCloseLiveIpc",{ids:e})}function _(){return i["b"].get("device/mediaServerList")}function k(e,t){return i["b"].post("device/batchUpdateMediaServer",{ids:e,mediaServerId:t})}function w(e,t){return i["b"].post("device/batchUpdateRtpProto",{ids:e,rtp_proto:t})}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].get("device/nvrItems",{params:e})}function S(e,t){return i["b"].post("device/batchBindRecorder",{ids:e,recorderId:t})}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["b"].get("device/videoOnlineList",{params:e})}function x(e,t){return i["b"].get("device/videoCover",{params:{mediaServerId:e,url:t}})}function R(e,t){return i["b"].post("device/ptzCtrl",{main_id:e,command_type:t})}function C(e){return i["b"].post("device/liveUrl",{main_id:e})}function B(e,t){return i["b"].promisePost("device/batchBindRecordPlan",{ids:e,planId:t})}function D(e){return i["b"].get("device/ipcShow",{params:{id:e}})}},c451:function(e,t,n){"use strict";n("0ea1")},d754:function(e,t,n){}}]);
//# sourceMappingURL=chunk-f68e6a1e.7463534e.js.map