{"version":3,"sources":["webpack:///./src/views/admin-users/Form.vue?4527","webpack:///./src/components/BForm/BTwoFormItem.vue","webpack:///src/components/BForm/BTwoFormItem.vue","webpack:///./src/components/BForm/BTwoFormItem.vue?a6ea","webpack:///./src/api/admin-role.js","webpack:///src/views/admin-users/Form.vue","webpack:///./src/views/admin-users/Form.vue?a20e","webpack:///./src/views/admin-users/Form.vue","webpack:///./src/views/admin-users/Form.vue?7163","webpack:///./src/components/BForm/BTwoFormItem.vue?ddc5"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","visible","loading","on","$emit","form","formLayout","staticClass","formItemLayout","labelCol","wrapperCol","directives","name","rawName","value","validatorRules","truename","expression","rules","required","message","validator","checkNickname","model","type","checkEmail","pattern","checkMobile","handlePass","handleConfirmPass","roles","handleChange","_l","role","index","key","code","_v","_s","staticRenderFns","extends","provide","BTwoFormItem","props","prop","String","methods","renderFormItem","vnode","data","class","component","getRoleItems","Request","get","result"],"mappings":"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","file":"js/chunk-176ea1c2.42861034.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-modal',{attrs:{\"title\":_vm.title,\"width\":780,\"visible\":_vm.visible,\"confirmLoading\":_vm.loading},on:{\"ok\":function () {\n      _vm.$emit('ok')\n    },\"cancel\":function () {\n      _vm.$emit('cancel')\n    }}},[_c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":_vm.formLayout}},[_c('div',{staticClass:\"form-group\"},[_c('b-two-form-item',{attrs:{\"label\":\"姓名\",\"label-col\":_vm.formItemLayout.labelCol,\"wrapper-col\":_vm.formItemLayout.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['truename', _vm.validatorRules.truename]),expression:\"['truename', validatorRules.truename]\"}],attrs:{\"placeholder\":\"\"}})],1),_c('b-two-form-item',{attrs:{\"label\":\"用户名\",\"label-col\":_vm.formItemLayout.labelCol,\"wrapper-col\":_vm.formItemLayout.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'nickname',\n              {\n                rules: [{ required: true, message: '请输入用户名!' }, { validator: _vm.checkNickname }]\n              }\n            ]),expression:\"[\\n              'nickname',\\n              {\\n                rules: [{ required: true, message: '请输入用户名!' }, { validator: checkNickname }]\\n              }\\n            ]\"}],attrs:{\"placeholder\":\"\",\"disabled\":_vm.model != null,\"autocomplete\":\"off\"}})],1)],1),_c('div',{staticClass:\"form-group\"},[_c('b-two-form-item',{attrs:{\"label\":\"邮箱地址\",\"label-col\":_vm.formItemLayout.labelCol,\"wrapper-col\":_vm.formItemLayout.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'email',\n              {\n                rules: [\n                  { required: true, message: '请输入邮箱!' },\n                  { type: 'email', message: '请输入正确的邮箱地址!' },\n                  { validator: _vm.checkEmail }\n                ]\n              }\n            ]),expression:\"[\\n              'email',\\n              {\\n                rules: [\\n                  { required: true, message: '请输入邮箱!' },\\n                  { type: 'email', message: '请输入正确的邮箱地址!' },\\n                  { validator: checkEmail }\\n                ]\\n              }\\n            ]\"}],attrs:{\"disabled\":_vm.model != null,\"placeholder\":\"\",\"autocomplete\":\"off\"}})],1),_c('b-two-form-item',{attrs:{\"label\":\"手机号\",\"label-col\":_vm.formItemLayout.labelCol,\"wrapper-col\":_vm.formItemLayout.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'verifiedMobile',\n              {\n                rules: [\n                  { required: true, message: '请输入手机号!' },\n                  { pattern: /^1[3456789]\\d{9}$/, message: '请输入正确的手机号!' },\n                  { validator: _vm.checkMobile }\n                ]\n              }\n            ]),expression:\"[\\n              'verifiedMobile',\\n              {\\n                rules: [\\n                  { required: true, message: '请输入手机号!' },\\n                  { pattern: /^1[3456789]\\\\d{9}$/, message: '请输入正确的手机号!' },\\n                  { validator: checkMobile }\\n                ]\\n              }\\n            ]\"}],attrs:{\"placeholder\":\"\",\"autocomplete\":\"off\"}})],1)],1),_c('div',{staticClass:\"form-group\"},[_c('b-two-form-item',{attrs:{\"label\":\"密码\",\"label-col\":_vm.formItemLayout.labelCol,\"wrapper-col\":_vm.formItemLayout.wrapperCol}},[(_vm.model == null)?_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'password',\n              {\n                rules: [\n                  { required: true, message: '请输入密码' },\n                  {\n                    validator: _vm.handlePass\n                  }\n                ]\n              }\n            ]),expression:\"[\\n              'password',\\n              {\\n                rules: [\\n                  { required: true, message: '请输入密码' },\\n                  {\\n                    validator: handlePass\\n                  }\\n                ]\\n              }\\n            ]\"}],attrs:{\"placeholder\":\"不填则不修改\",\"name\":\"password\",\"autocomplete\":\"off\",\"type\":\"password\"}}):_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'password',\n              {\n                rules: [\n                  {\n                    validator: _vm.handlePass\n                  }\n                ]\n              }\n            ]),expression:\"[\\n              'password',\\n              {\\n                rules: [\\n                  {\\n                    validator: handlePass\\n                  }\\n                ]\\n              }\\n            ]\"}],attrs:{\"placeholder\":\"\",\"name\":\"password\",\"autocomplete\":\"new-password\",\"type\":\"password\"}})],1),_c('b-two-form-item',{attrs:{\"label\":\"确认密码\",\"label-col\":_vm.formItemLayout.labelCol,\"wrapper-col\":_vm.formItemLayout.wrapperCol}},[(_vm.model == null)?_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'confirmPassword',\n              {\n                rules: [\n                  { required: true, message: '请输入确认密码' },\n                  {\n                    validator: _vm.handleConfirmPass\n                  }\n                ]\n              }\n            ]),expression:\"[\\n              'confirmPassword',\\n              {\\n                rules: [\\n                  { required: true, message: '请输入确认密码' },\\n                  {\\n                    validator: handleConfirmPass\\n                  }\\n                ]\\n              }\\n            ]\"}],attrs:{\"placeholder\":\"\",\"autocomplete\":\"new-password\",\"type\":\"password\",\"name\":\"confirmPassword\"}}):_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'confirmPassword',\n              {\n                rules: [\n                  {\n                    validator: _vm.handleConfirmPass\n                  }\n                ]\n              }\n            ]),expression:\"[\\n              'confirmPassword',\\n              {\\n                rules: [\\n                  {\\n                    validator: handleConfirmPass\\n                  }\\n                ]\\n              }\\n            ]\"}],attrs:{\"placeholder\":\"\",\"autocomplete\":\"off\",\"type\":\"password\",\"name\":\"confirmPassword\"}})],1)],1),_c('div',{staticClass:\"form-group\"},[_c('b-two-form-item',{attrs:{\"label\":\"用户角色\",\"label-col\":_vm.formItemLayout.labelCol,\"wrapper-col\":_vm.formItemLayout.wrapperCol,\"has-feedback\":\"\"}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['roles', _vm.validatorRules.roles]),expression:\"['roles', validatorRules.roles]\"}],attrs:{\"mode\":\"tags\",\"placeholder\":\"请选择角色\"},on:{\"change\":_vm.handleChange}},_vm._l((_vm.roleItems),function(role,index){return _c('a-select-option',{key:index,attrs:{\"value\":role.code}},[_vm._v(\" \"+_vm._s(role.name)+\" \")])}),1)],1)],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./BTwoFormItem.vue?vue&type=script&lang=js&\"\nexport * from \"./BTwoFormItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BTwoFormItem.vue?vue&type=style&index=0&id=612cc6e2&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"612cc6e2\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { Form } from 'ant-design-vue'\n\nexport default {\n  name: 'BTwoFormItem',\n  extends: Form.Item,\n  provide() {\n    return {\n      BTwoFormItem: this,\n    }\n  },\n  props: {\n    prop: String,\n  },\n  methods: {\n    renderFormItem() {\n      const vnode = Form.Item.methods.renderFormItem.bind(this)(...arguments)\n      vnode.data.class = 'ant-form-item two-form-item'\n\n      return vnode\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"less\">\n.two-form-item {\n  width: 320px;\n  .ant-form-item-label {\n    float: left;\n    width: 100px;\n    padding: 0px 15px;\n    margin-right: 0px;\n  }\n  .ant-form-item-control-wrapper {\n    width: 220px;\n    .ant-input,\n    .ant-select {\n      width: 100%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BTwoFormItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BTwoFormItem.vue?vue&type=script&lang=js&\"","import Request from '@/axios/request'\n\nexport function getRoleItems () {\n  return Request.get('role/items')\n}","<template>\n  <a-modal\n    :title=\"title\"\n    :width=\"780\"\n    :visible=\"visible\"\n    :confirmLoading=\"loading\"\n    @ok=\"\n      () => {\n        $emit('ok')\n      }\n    \"\n    @cancel=\"\n      () => {\n        $emit('cancel')\n      }\n    \"\n  >\n    <a-spin :spinning=\"loading\">\n      <a-form :form=\"form\" :layout=\"formLayout\">\n        <div class=\"form-group\">\n          <b-two-form-item\n            label=\"姓名\"\n            :label-col=\"formItemLayout.labelCol\"\n            :wrapper-col=\"formItemLayout.wrapperCol\"\n          >\n            <a-input placeholder=\"\" v-decorator=\"['truename', validatorRules.truename]\" />\n          </b-two-form-item>\n          <b-two-form-item\n            label=\"用户名\"\n            :label-col=\"formItemLayout.labelCol\"\n            :wrapper-col=\"formItemLayout.wrapperCol\"\n          >\n            <a-input\n              placeholder=\"\"\n              :disabled=\"model != null\"\n              autocomplete=\"off\"\n              v-decorator=\"[\n                'nickname',\n                {\n                  rules: [{ required: true, message: '请输入用户名!' }, { validator: checkNickname }]\n                }\n              ]\"\n            />\n          </b-two-form-item>\n        </div>\n\n        <div class=\"form-group\">\n          <b-two-form-item\n            label=\"邮箱地址\"\n            :label-col=\"formItemLayout.labelCol\"\n            :wrapper-col=\"formItemLayout.wrapperCol\"\n          >\n            <a-input\n              :disabled=\"model != null\"\n              placeholder=\"\"\n              autocomplete=\"off\"\n              v-decorator=\"[\n                'email',\n                {\n                  rules: [\n                    { required: true, message: '请输入邮箱!' },\n                    { type: 'email', message: '请输入正确的邮箱地址!' },\n                    { validator: checkEmail }\n                  ]\n                }\n              ]\"\n            />\n          </b-two-form-item>\n\n          <b-two-form-item\n            label=\"手机号\"\n            :label-col=\"formItemLayout.labelCol\"\n            :wrapper-col=\"formItemLayout.wrapperCol\"\n          >\n            <a-input\n              placeholder=\"\"\n              autocomplete=\"off\"\n              v-decorator=\"[\n                'verifiedMobile',\n                {\n                  rules: [\n                    { required: true, message: '请输入手机号!' },\n                    { pattern: /^1[3456789]\\d{9}$/, message: '请输入正确的手机号!' },\n                    { validator: checkMobile }\n                  ]\n                }\n              ]\"\n            />\n          </b-two-form-item>\n        </div>\n        <div class=\"form-group\">\n          <b-two-form-item\n            label=\"密码\"\n            :label-col=\"formItemLayout.labelCol\"\n            :wrapper-col=\"formItemLayout.wrapperCol\"\n          >\n            <a-input\n              v-if=\"model == null\"\n              placeholder=\"不填则不修改\"\n              name=\"password\"\n              autocomplete=\"off\"\n              v-decorator=\"[\n                'password',\n                {\n                  rules: [\n                    { required: true, message: '请输入密码' },\n                    {\n                      validator: handlePass\n                    }\n                  ]\n                }\n              ]\"\n              type=\"password\"\n            />\n            <a-input\n              v-else\n              placeholder=\"\"\n              name=\"password\"\n              autocomplete=\"new-password\"\n              v-decorator=\"[\n                'password',\n                {\n                  rules: [\n                    {\n                      validator: handlePass\n                    }\n                  ]\n                }\n              ]\"\n              type=\"password\"\n            />\n          </b-two-form-item>\n          <b-two-form-item\n            label=\"确认密码\"\n            :label-col=\"formItemLayout.labelCol\"\n            :wrapper-col=\"formItemLayout.wrapperCol\"\n          >\n            <a-input\n              v-if=\"model == null\"\n              placeholder=\"\"\n              autocomplete=\"new-password\"\n              v-decorator=\"[\n                'confirmPassword',\n                {\n                  rules: [\n                    { required: true, message: '请输入确认密码' },\n                    {\n                      validator: handleConfirmPass\n                    }\n                  ]\n                }\n              ]\"\n              type=\"password\"\n              name=\"confirmPassword\"\n            />\n            <a-input\n              v-else\n              placeholder=\"\"\n              autocomplete=\"off\"\n              v-decorator=\"[\n                'confirmPassword',\n                {\n                  rules: [\n                    {\n                      validator: handleConfirmPass\n                    }\n                  ]\n                }\n              ]\"\n              type=\"password\"\n              name=\"confirmPassword\"\n            />\n          </b-two-form-item>\n        </div>\n\n        <div class=\"form-group\">\n          <b-two-form-item\n            label=\"用户角色\"\n            :label-col=\"formItemLayout.labelCol\"\n            :wrapper-col=\"formItemLayout.wrapperCol\"\n            has-feedback\n          >\n            <a-select\n              mode=\"tags\"\n              placeholder=\"请选择角色\"\n              @change=\"handleChange\"\n              v-decorator=\"['roles', validatorRules.roles]\"\n            >\n              <a-select-option v-for=\"(role, index) in roleItems\" :key=\"index\" :value=\"role.code\">\n                {{ role.name }}\n              </a-select-option>\n            </a-select>\n          </b-two-form-item>\n        </div>\n      </a-form>\n    </a-spin>\n  </a-modal>\n</template>\n\n<script>\nimport { SYSTEM_VALIDATE_RULE_PATTERNS } from '@/libs/constants'\nimport { pick } from 'lodash'\nimport BTwoFormItem from '@/components/BForm/BTwoFormItem'\nimport { getRoleItems } from '@/api/admin-role'\nimport { checkNickname, checkEmail, checkMobile, showUser } from '@/api/admin-users'\n// 表单字段\nconst fields = ['truename', 'email', 'nickname', 'password', 'confirmPassword', 'verifiedMobile', 'roles']\n\nexport default {\n    props: {\n        visible: {\n            type: Boolean,\n            default: true\n        },\n        loading: {\n            type: Boolean,\n            default: () => false\n        }\n    },\n    components: {\n        BTwoFormItem\n    },\n    data () {\n        return {\n            title: '创建用户',\n            formLayout: 'inline',\n            model: null,\n            form: this.$form.createForm(this),\n            validatorRules: {\n                truename: {\n                    rules: [{ required: true, message: '请输入姓名!' }]\n                },\n                email: {\n                    rules: [\n                        { required: true, message: '请输入邮箱!' },\n                        { type: 'email', message: '请输入正确的邮箱地址!' }\n                    ]\n                },\n                nickname: {\n                    rules: [{ required: true, message: '请输入用户名!' }]\n                },\n                verifiedMobile: {\n                    rules: [\n                        { required: true, message: '请输入手机号!' },\n                        { pattern: SYSTEM_VALIDATE_RULE_PATTERNS.PHONE, message: '请输入正确的手机号!' }\n                    ]\n                },\n                roles: {\n                    rules: [{ required: true, message: '请设置用户角色!' }]\n                }\n            },\n            roleItems: []\n        }\n    },\n    created () {\n        // 防止表单未注册\n        fields.forEach((v) => this.form.getFieldDecorator(v))\n\n        // 当 model 发生改变时，为表单设置值\n        this.$watch('model', () => {\n            if (this.model) {\n                this.$nextTick(() => {\n                    this.form.setFieldsValue(pick(this.model, fields))\n                })\n            } else {\n                this.form.resetFields()\n            }\n        })\n    },\n    computed: {\n        formItemLayout () {\n            const { formLayout } = this\n            return formLayout === 'horizontal'\n                ? {\n                      labelCol: { span: 4 },\n                      wrapperCol: { span: 14 }\n                  }\n                : {}\n        },\n        buttonItemLayout () {\n            const { formLayout } = this\n            return formLayout === 'horizontal'\n                ? {\n                      wrapperCol: { span: 14, offset: 4 }\n                  }\n                : {}\n        }\n    },\n    methods: {\n        setFormData () {\n            this.form.resetFields()\n            this.model = Object.assign({}, this.model)\n        },\n        async getUser (id) {\n            const user = await showUser(id)\n            this.model = user\n            this.setFormData()\n        },\n        async getRoleItems () {\n            const roleItems = await getRoleItems()\n            this.roleItems = roleItems\n        },\n        handleChange (value) {\n            console.log(`selected ${value}`)\n            this.form.setFieldsValue({\n                roles: `${value}`\n            })\n        },\n        handleSubmit (e) {\n            this.form.validateFields((err, values) => {\n                console.log('err:', err)\n                if (!err) {\n                    console.log('Received values of form: ', values)\n                    this.$emit('ok')\n                }\n            })\n        },\n        async checkNickname (rule, value, callback) {\n            if (this.model) {\n                callback()\n            }\n            if (value) {\n                const result = await checkNickname(value)\n                if (result && result.code != 0) {\n                    callback(new Error(result.message))\n                } else {\n                    callback()\n                }\n            }\n        },\n        async checkEmail (rule, value, callback) {\n            if (this.model) {\n                callback()\n            }\n            if (value) {\n                const result = await checkEmail(value)\n                if (result && result.code != 0) {\n                    callback(new Error(result.message))\n                } else {\n                    callback()\n                }\n            }\n        },\n        async checkMobile (rule, value, callback) {\n            if (value) {\n                const userId = this.model ? this.model.id : null\n                const result = await checkMobile(value, userId)\n                if (result && result.code != 0) {\n                    callback(new Error(result.message))\n                } else {\n                    callback()\n                }\n            }\n        },\n        handlePass (rule, value, callback) {\n            const form = this.form\n            if (value && this.confirmDirty) {\n                form.validateFields(['confirmPassword'], { force: true })\n            }\n            callback()\n        },\n        handleConfirmPass (rule, value, callback) {\n            const form = this.form\n            if (value && value !== form.getFieldValue('password')) {\n                callback(new Error('两次输入密码不一致'))\n            } else {\n                callback()\n            }\n        }\n    },\n    watch: {\n        visible (newValue, oldValue) {\n            if (newValue) {\n                this.getRoleItems()\n            }\n        }\n    }\n}\n</script>\n<style lang=\"less\" scoped>\n.ant-select {\n    min-width: 220px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=e55ec3ba&scoped=true&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Form.vue?vue&type=style&index=0&id=e55ec3ba&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e55ec3ba\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&id=e55ec3ba&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BTwoFormItem.vue?vue&type=style&index=0&id=612cc6e2&scoped=true&lang=less&\""],"sourceRoot":""}