{"version":3,"sources":["webpack:///./src/components/RecordPlan.vue?4028","webpack:///./src/components/RecordPlan.vue?7f46","webpack:///src/components/RecordPlan.vue","webpack:///./src/components/RecordPlan.vue?c9d2","webpack:///./src/components/RecordPlan.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","_v","staticClass","on","$event","preventDefault","refresh","attrs","selectall","unselectall","_l","day","index","key","toString","_s","hour","class","dayClick","durations","d","i","slot","model","value","callback","$$v","dstarthh","expression","dstartmm","dendhh","dendmm","removeDuration","saveDuration","style","durationWidth","durationLeft","durationmove","durationClick","staticRenderFns","component"],"mappings":"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","file":"js/chunk-466fb66b.872f437d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecordPlan.vue?vue&type=style&index=0&id=c2b20b52&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"-moz-user-select\":\"none\",\"-webkit-user-select\":\"none\",\"user-select\":\"none\",\"overflow-x\":\"auto\",\"overflow-y\":\"hidden\"}},[_c('span',{staticStyle:{\"color\":\"lightgrey\",\"font-style\":\"italic\",\"line-height\":\"24px\"}},[_vm._v(\"录像计划 配置云端录像开启时段\")]),_c('div',{staticClass:\"plans\"},[_c('div',{staticClass:\"plan-row-header\"},[_c('div',{staticClass:\"plan-week plan-header\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.preventDefault();return _vm.refresh()}}},[_c('i',{staticClass:\"fa fa-refresh\",attrs:{\"title\":\"点击还原\"}}),_vm._v(\" 重置 \")]),_c('div',{staticClass:\"plan-week plan-header\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.preventDefault();return _vm.selectall()}}},[_c('i',{staticClass:\"fa fa-check\",attrs:{\"title\":\"点击全选\"}}),_vm._v(\" 全选 \")]),_c('div',{staticClass:\"plan-week plan-header\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.preventDefault();return _vm.unselectall()}}},[_c('i',{staticClass:\"fa fa-close\",attrs:{\"title\":\"点击清空\"}}),_vm._v(\" 清空 \")])]),_vm._l((_vm.days),function(day,index){return _c('div',{key:index,staticClass:\"plan-row\",attrs:{\"index\":index.toString()}},[_c('div',{staticClass:\"plan-week\"},[_vm._v(\"星期\"+_vm._s(day))]),_c('div',{staticClass:\"plan-hours\"},[_vm._l((_vm.maxHour),function(hour){return _c('div',{key:hour.toString(),class:{'plan-title-num': true,'plan-title-num-left': hour <=1 ,'plan-title-num-right': hour >= 10 }},[_vm._v(_vm._s(((hour%2) == 0 || hour == 1 ) ? (hour == 1 ? 0:hour):''))])}),_vm._l((_vm.maxHour),function(hour){return _c('div',{key:(hour + \"_index\"),class:{'plan-title-line': true,'plan-title-line-left': hour <=1 }},[_vm._v(\"|\")])}),_c('div',{staticClass:\"plan-day\",attrs:{\"index\":index.toString()},on:{\"mousedown\":function($event){$event.preventDefault();return _vm.dayClick($event)}}},_vm._l(((_vm.durations[index] || [])),function(d,i){return _c('span',{key:i.toString()},[_c('a-popover',{attrs:{\"placement\":\"top\",\"title\":\"录像时间段\",\"width\":\"250\",\"trigger\":\"click\"}},[_c('template',{slot:\"content\"},[_c('a-input',{staticStyle:{\"width\":\"46px\"},attrs:{\"size\":\"small\",\"min\":0,\"max\":23,\"placeholder\":\"时\"},model:{value:(_vm.dstarthh),callback:function ($$v) {_vm.dstarthh=$$v},expression:\"dstarthh\"}}),_vm._v(\": \"),_c('a-input',{staticStyle:{\"width\":\"46px\"},attrs:{\"size\":\"small\",\"min\":0,\"max\":59,\"placeholder\":\"分\"},model:{value:(_vm.dstartmm),callback:function ($$v) {_vm.dstartmm=$$v},expression:\"dstartmm\"}}),_vm._v(\"- \"),_c('a-input',{staticStyle:{\"width\":\"46px\"},attrs:{\"size\":\"small\",\"min\":0,\"max\":23,\"placeholder\":\"时\"},model:{value:(_vm.dendhh),callback:function ($$v) {_vm.dendhh=$$v},expression:\"dendhh\"}}),_vm._v(\": \"),_c('a-input',{staticStyle:{\"width\":\"46px\"},attrs:{\"size\":\"small\",\"min\":0,\"max\":59,\"placeholder\":\"分\"},model:{value:(_vm.dendmm),callback:function ($$v) {_vm.dendmm=$$v},expression:\"dendmm\"}}),_c('div',{staticStyle:{\"text-align\":\"center\",\"margin\":\"0\"}},[_c('a-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.removeDuration(index,i)}}},[_vm._v(\"删除\")]),_c('a-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.saveDuration(index, i)}}},[_vm._v(\"保存\")])],1)],1),_c('div',{staticClass:\"plan-duration\",style:('width:'+ _vm.durationWidth(d,index)+'%;left:'+_vm.durationLeft(d,index,i)+'%;'),attrs:{\"id\":'duration'+index+''+i,\"dayindex\":index,\"durationindex\":i,\"start\":d['s'+(index+1)],\"end\":d['e'+(index+1)]},on:{\"mousemove\":function($event){$event.preventDefault();return _vm.durationmove($event,index,i)},\"mousedown\":function($event){$event.preventDefault();return _vm.durationClick($event,d,index)}}})],2)],1)}),0)],2)])})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- eslint-disable eqeqeq -->\n<!-- eslint-disable eqeqeq -->\n<!-- eslint-disable camelcase -->\n<template>\n  <div\n    style=\"-moz-user-select:none;-webkit-user-select:none;user-select:none;overflow-x:auto;overflow-y:hidden;\"\n  >\n    <span style=\"color:lightgrey;font-style:italic;line-height:24px;\">录像计划 配置云端录像开启时段</span>\n    <div class=\"plans\">\n      <div class=\"plan-row-header\">\n        <div\n          class=\"plan-week plan-header\"\n          @click.prevent=\"refresh()\"\n          style=\"cursor:pointer;\"\n        >\n          <i class=\"fa fa-refresh\" title=\"点击还原\"></i>&nbsp;重置\n        </div>\n        <div\n          class=\"plan-week plan-header\"\n          @click.prevent=\"selectall()\"\n          style=\"cursor:pointer;\"\n        >\n          <i class=\"fa fa-check\" title=\"点击全选\"></i>&nbsp;全选\n        </div>\n        <div\n          class=\"plan-week plan-header\"\n          @click.prevent=\"unselectall()\"\n          style=\"cursor:pointer;\"\n        >\n          <i class=\"fa fa-close\" title=\"点击清空\"></i>&nbsp;清空\n        </div>\n      </div>\n      <div\n        v-for=\"(day, index) in days\"\n        class=\"plan-row\"\n        :index=\"index.toString()\"\n        :key=\"index\"\n      >\n        <div class=\"plan-week\">星期{{ day }}</div>\n        <div class=\"plan-hours\">\n          <div\n            v-for=\"hour in maxHour\"\n            :key=\"hour.toString()\"\n            :class=\"{'plan-title-num': true,'plan-title-num-left': hour <=1 ,'plan-title-num-right': hour >= 10 }\"\n          >{{ ((hour%2) == 0 || hour == 1 ) ? (hour == 1 ? 0:hour):'' }}</div>\n          <div\n            v-for=\"hour in maxHour\"\n            :key=\"`${hour}_index`\"\n            :class=\"{'plan-title-line': true,'plan-title-line-left': hour <=1 }\"\n          >|</div>\n          <div\n            :index=\"index.toString()\"\n            class=\"plan-day\"\n            @mousedown.prevent=\"dayClick($event)\"\n          >\n            <span v-for=\"(d, i) in (durations[index] || [])\" :key=\"i.toString()\">\n              <a-popover placement=\"top\" title=\"录像时间段\" width=\"250\" trigger=\"click\">\n                <template slot=\"content\">\n                  <a-input\n                    v-model=\"dstarthh\"\n                    size=\"small\"\n                    :min=\"0\"\n                    :max=\"23\"\n                    placeholder=\"时\"\n                    style=\"width:46px;\"\n                  />:\n                  <a-input\n                    v-model=\"dstartmm\"\n                    size=\"small\"\n                    :min=\"0\"\n                    :max=\"59\"\n                    placeholder=\"分\"\n                    style=\"width:46px;\"\n                  />-\n                  <a-input\n                    v-model=\"dendhh\"\n                    size=\"small\"\n                    :min=\"0\"\n                    :max=\"23\"\n                    placeholder=\"时\"\n                    style=\"width:46px;\"\n                  />:\n                  <a-input\n                    v-model=\"dendmm\"\n                    size=\"small\"\n                    :min=\"0\"\n                    :max=\"59\"\n                    placeholder=\"分\"\n                    style=\"width:46px;\"\n                  />\n                  <div style=\"text-align: center; margin: 0\">\n                    <a-button size=\"small\" @click=\"removeDuration(index,i)\" >删除</a-button>\n                    <a-button size=\"small\" @click=\"saveDuration(index, i)\" >保存</a-button>\n                  </div>\n                </template>\n                <div\n                  @mousemove.prevent=\"durationmove($event,index,i)\"\n                  @mousedown.prevent=\"durationClick($event,d,index)\"\n                  :id=\"'duration'+index+''+i\"\n                  :dayindex=\"index\"\n                  :durationindex=\"i\"\n                  :start=\"d['s'+(index+1)]\"\n                  :end=\"d['e'+(index+1)]\"\n                  class=\"plan-duration\"\n                  :style=\"'width:'+ durationWidth(d,index)+'%;left:'+durationLeft(d,index,i)+'%;'\"\n                />\n              </a-popover>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n    props: {\n        serial: {\n            type: String,\n            default: ''\n        },\n        code: {\n            type: String,\n            default: ''\n        }\n    },\n    data () {\n        return {\n            days: ['一', '二', '三', '四', '五', '六', '日'],\n            checks: [],\n            isclick: false,\n            recordPlan: '',\n            isDown: false,\n            divIndex: 0,\n            currentDayWidth: 0,\n            isDown: false,\n            visible: false,\n            currentDuration: null,\n            isDownLeft: false,\n            isDownLeft: false,\n            value1: '',\n            durations: [],\n            originDurations: [],\n            dayindex: 0,\n            overIndex: -1,\n            durationDatas: [],\n            prex: 0,\n            durationindex: 0,\n            startNum: 0,\n            dstarthh: '',\n            dstartmm: '',\n            dendhh: '',\n            dendmm: '',\n            moveprex: 0,\n            recordPlan: '',\n            mouseup: null,\n            mousemove: null,\n            movePosNum: 0,\n            nextStartNum: 0,\n            maxHour: 24\n        }\n    },\n    created () {},\n    watch: {},\n    mounted () {\n        this.mouseup = (e) => {\n            this.isDown = false\n            this.isDownLeft = false\n            this.isDownRight = false\n            this.moveprex = 0\n            this.movePosNum = 0\n            this.prex = 0\n            this.nextStartNum = 0\n            this.checkPlanData(false)\n            this.log('mouse up')\n        }\n        this.mousemove = (e) => {\n            if (!this.isDown && !this.isDownLeft && !this.isDownRight) {\n                return false\n            }\n            if (this.isDown) {\n                var x = this.getPosX(e)\n                this.moveprex = x\n                var pos = Math.floor(((x / 656) * 1440) / 60) + ':' + Math.floor(((x / 656) * 1440) % 60)\n                // 校准成30的倍数\n                var posNum = this.timeToNum(pos)\n                posNum = posNum + (30 - (posNum % 30))\n                if (posNum > 1440) {\n                    posNum = 1440\n                }\n                if (posNum <= this.movePosNum) {\n                    return\n                }\n                this.movePosNum = posNum\n                if (x == this.prex) {\n                    return\n                }\n                if (x > this.prex) {\n                    var start_time = this.numToTime(this.startNum)\n                    var end_time = this.numToTime(posNum)\n                    var start_key = 's' + (this.dayindex + 1)\n                    var end_key = 'e' + (this.dayindex + 1)\n                    if (this.startNum == posNum || start_time == end_time) {\n                        this.log(\n                            'right move ignore isDown:' +\n                                this.isDown +\n                                ',prex=' +\n                                this.prex +\n                                ',x=' +\n                                x +\n                                'datalenth=' +\n                                this.durationDatas.length +\n                                ',durationindex=' +\n                                this.durationindex +\n                                ',posNum=' +\n                                posNum\n                        )\n                        return\n                    }\n                    // 判断有没有和其它交界\n                    if (this.durationindex + 1 < this.durationDatas.length) {\n                        this.nextStartNum = this.timeToNum(this.durationDatas[this.durationindex + 1][start_key])\n                        if (posNum > this.nextStartNum) {\n                            this.log(\n                                'right move ignore 交界 isDown:' +\n                                    this.isDown +\n                                    ',prex=' +\n                                    this.prex +\n                                    \"',x=\" +\n                                    x +\n                                    ',datalenth=' +\n                                    this.durationDatas.length +\n                                    ',durationindex=' +\n                                    this.durationindex +\n                                    ',posNum=' +\n                                    posNum +\n                                    ',nextStart=' +\n                                    this.durationDatas[this.durationindex + 1]['s' + (this.dayindex + 1)]\n                            )\n                            return\n                        }\n                    }\n                    if (this.nextStartNum != 0 && posNum > this.nextStartNum) {\n                        posNum = this.nextStartNum\n                        this.movePosNum = posNum\n                        end_time = this.numToTime(posNum)\n                    }\n                    this.durationDatas[this.durationindex][start_key] = start_time\n                    this.durationDatas[this.durationindex][end_key] = end_time\n                    this.log(\n                        'right move log isDown:' +\n                            this.isDown +\n                            ',prex=' +\n                            this.prex +\n                            ',x=' +\n                            x +\n                            ',datalenth=' +\n                            this.durationDatas.length +\n                            ',durationindex=' +\n                            this.durationindex +\n                            ',posNum=' +\n                            posNum\n                    )\n\n                    this.$set(this.durations, this.dayindex, this.durationDatas)\n                    // console.log({\n                    //     dayindex: this.dayindex,\n                    //     durations: this.durations,\n                    //     durationDatas: this.durationDatas\n                    // })\n                }\n            }\n        }\n        document.addEventListener('mouseup', this.mouseup)\n        document.addEventListener('mousemove', this.mousemove)\n    },\n    beforeDestroy () {\n        document.removeEventListener('mouseup', this.mouseup)\n        document.removeEventListener('mousemove', this.mousemove)\n    },\n    methods: {\n        init (recordPlan) {\n            this.originDurations = []\n            this.durations = []\n            this.durations = recordPlan ? JSON.parse(recordPlan) : []\n            this.originDurations = []\n            for (var i = 0; i < 7; i++) {\n                var el = []\n                if (this.durations[i]) {\n                    el = this.durations[i]\n                } else {\n                    this.durations[i] = el\n                }\n                this.originDurations[i] = el\n            }\n        },\n        isModify () {\n            if (this.originDurations.length == 0) {\n                return false\n            }\n            for (var i = 0; i < this.durations.length; i++) {\n                if (this.originDurations[i] != this.durations[i]) {\n                    return true\n                }\n            }\n            return false\n        },\n        log (content) {\n            // console.log(content)\n        },\n        durationmove (e, dayindex, durationindex) {\n            if (this.isDown && durationindex == this.durationindex && dayindex == this.dayindex) {\n                var x = this.getPosX(e)\n                var end_num = this.timeToNum(\n                    Math.floor((((this.prex + x) / 656) * 1440) / 60) +\n                        ':' +\n                        Math.floor((((this.prex + x) / 656) * 1440) % 60)\n                )\n                end_num = end_num + (30 - (end_num % 30))\n                if (x == 0) {\n                    end_num = this.startNum\n                }\n                if (end_num > 1440) {\n                    end_num = 1440\n                }\n                this.log(\n                    'duration move log moveprex=' +\n                        this.moveprex +\n                        ',prex=' +\n                        this.prex +\n                        ',x=' +\n                        x +\n                        ',startNum=' +\n                        this.startNum +\n                        ',end_num=' +\n                        end_num\n                )\n                if (end_num >= this.startNum) {\n                    if (this.nextStartNum != 0 && end_num > this.nextStartNum) {\n                        end_num = this.nextStartNum\n                    }\n                    this.movePosNum = end_num\n                    this.durations[dayindex][durationindex]['e' + (dayindex + 1)] = this.numToTime(end_num)\n                }\n            }\n        },\n        removeDuration (dayindex, durationindex) {\n            var newdaydurations = []\n            for (var i = 0; i < this.durations[dayindex].length; i++) {\n                if (i == durationindex) {\n                    continue\n                }\n                newdaydurations.push(this.durations[dayindex][i])\n            }\n            this.$set(this.durations, dayindex, newdaydurations)\n            $('.plan-row-header').click()\n        },\n        saveDuration (dayindex, durationindex) {\n            if (this.dstarthh.length == 1) {\n                this.dstarthh = '0' + this.dstarthh\n            }\n            if (this.dstartmm.length == 1) {\n                this.dstartmm = '0' + this.dstartmm\n            }\n            if (this.dendhh.length == 1) {\n                this.dendhh = '0' + this.dendhh\n            }\n            if (this.dendmm.length == 1) {\n                this.dendmm = '0' + this.dendmm\n            }\n            var start_time = this.dstarthh + ':' + this.dstartmm\n            var end_time = this.dendhh + ':' + this.dendmm\n            var newdaydurations = []\n            var len = this.durations[dayindex].length\n            for (var i = 0; i < len; i++) {\n                if (i == durationindex) {\n                    if (this.timeToNum(start_time) > this.timeToNum(end_time)) {\n                        this.$message.warning('结束时间不能小于开始时间')\n                        return\n                    }\n                    if (this.timeToNum(end_time) > 1440) {\n                        this.$message.warning('结束时间不能大于24点')\n                        return\n                    }\n                    if (this.timeToNum(start_time) < 0) {\n                        this.$message.warning('开始时间不能小于0点')\n                        return\n                    }\n                    if (i > 0) {\n                        var pd = this.durations[dayindex][i - 1]\n                        if (this.timeToNum(start_time) < this.timeToNum(pd['e' + (dayindex + 1)])) {\n                            this.$message.warning('开始时间须大于上一段结束时间')\n                            return\n                        }\n                    }\n                    if (i + 1 < len) {\n                        var pd = this.durations[dayindex][i + 1]\n                        if (this.timeToNum(end_time) > this.timeToNum(pd['s' + (dayindex + 1)])) {\n                            this.$message.warning('结束时间须小于下一段开始时间')\n                            return\n                        }\n                    }\n                    var ndata = {}\n                    ndata['s' + (dayindex + 1)] = start_time\n                    ndata['e' + (dayindex + 1)] = end_time\n                    newdaydurations.push(ndata)\n                } else {\n                    newdaydurations.push(this.durations[dayindex][i])\n                }\n            }\n            this.$set(this.durations, dayindex, newdaydurations)\n            $('.plan-row-header').click()\n        },\n        durationClick (e, d, dayindex) {\n            this.dstarthh = d['s' + (dayindex + 1)].split(':')[0]\n            this.dstartmm = d['s' + (dayindex + 1)].split(':')[1]\n            this.dendhh = d['e' + (dayindex + 1)].split(':')[0]\n            this.dendmm = d['e' + (dayindex + 1)].split(':')[1]\n            if (e && e.stopPropagation) {\n                e.stopPropagation()\n            } else {\n                window.event.cancelBubble = true\n            }\n        },\n        dayClick (event) {\n            if (this.durations.length != 7) {\n                this.$message.warning('获取录像计划中,请稍后...')\n                return\n            }\n            this.isDown = true\n            var x = this.getPosX(event)\n            this.prex = x\n            this.dayindex = parseInt($(event.currentTarget).attr('index'))\n            // console.log('his.dayindex:', this.dayindex)\n            var durationDatas = []\n            var start = Math.floor(((x / 656) * 1440) / 60) + ':' + Math.floor(((x / 656) * 1440) % 60)\n            // 校准成30的倍数\n            var snum = this.timeToNum(start)\n            if (snum % 30 > 15) {\n                this.startNum = snum + (30 - (snum % 30))\n            } else {\n                this.startNum = snum - (snum % 30)\n            }\n            var newData = {}\n            newData['s' + (this.dayindex + 1)] = this.numToTime(this.startNum)\n            newData['e' + (this.dayindex + 1)] = this.numToTime(this.startNum)\n            var hasPush = false\n            for (var i = 0; i < this.durations[this.dayindex].length; i++) {\n                var el = this.durations[this.dayindex][i]\n                if (this.startNum < this.timeToNum(el['s' + (this.dayindex + 1)]) && !hasPush) {\n                    hasPush = true\n                    this.durationindex = i\n                    durationDatas.push(newData)\n                }\n                durationDatas.push(el)\n            }\n            if (durationDatas.length == 0 || !hasPush) {\n                durationDatas.push(newData)\n                this.durationindex = durationDatas.length - 1\n            }\n            this.durationDatas = durationDatas\n            this.log(\n                'day click log x=' +\n                    x +\n                    ',dayindex=' +\n                    this.dayindex +\n                    ',predatalength=' +\n                    (this.durations[this.dayindex] || []).length +\n                    ',time=' +\n                    newData['s' + (this.dayindex + 1)] +\n                    'dataarr=' +\n                    this.durations[this.dayindex]\n            )\n        },\n        getPosX (event) {\n            var x, y\n            var event = event || window.event\n            if (event.offsetX || event.offsetY) {\n                x = event.offsetX\n                y = event.offsetY\n            } else if (event.layerX || event.layerY) {\n                x = event.layerX\n                y = event.layerY\n            }\n            x = parseInt(x)\n            if (x < 0) {\n                x = 0\n            } else if (x > 656) {\n                x = 656\n            }\n            return x\n        },\n        timeToNum (t) {\n            var time = t.split(':')\n            var h = parseInt(time[0])\n            var m = parseInt(time[1])\n            var sum = h * 60 + m\n            return sum\n        },\n        numToTime (sum) {\n            var h = Math.floor(sum / 60) < 10 ? '0' + Math.floor(sum / 60) : Math.floor(sum / 60)\n            var m = sum % 60 < 10 ? '0' + (sum % 60) : sum % 60\n            var t = h + ':' + m\n            return t\n        },\n        durationLeft (d, dayindex, durationindex) {\n            var preWidth = 0\n            for (var i = 0; i < durationindex; i++) {\n                preWidth += this.durationWidth(this.durations[dayindex][i], dayindex)\n            }\n            if (preWidth < 0) {\n                preWidth = 0\n            }\n            var s = this.timeToNum(d['s' + (dayindex + 1)])\n            var ret = (s / 1440) * 100 - preWidth\n            return ret\n        },\n        durationWidth (d, dayindex) {\n            var s = this.timeToNum(d['e' + (dayindex + 1)]) - this.timeToNum(d['s' + (dayindex + 1)])\n            return (s / 1440) * 100\n        },\n        refresh () {\n            this.$confirm(`恢复初始配置，当前的编辑会丢失，是否继续?`, '提示')\n                .then(() => {\n                    this.reset()\n                })\n                .catch(() => {})\n        },\n        getChecks () {\n            var plans = this.checks.join('')\n            return plans\n        },\n        reset () {\n            for (var i = 0; i < 7; i++) {\n                var el = this.originDurations[i] || []\n                this.$set(this.durations, i, el)\n            }\n        },\n        checkPlanData (join) {\n            var durationDatas = []\n            for (var i = 0; i < 7; i++) {\n                var els = []\n                if (this.durations[i]) {\n                    for (var j = 0; j < this.durations[i].length; j++) {\n                        var s_key = 's' + (i + 1)\n                        var e_key = 'e' + (i + 1)\n                        var s_num = this.timeToNum(this.durations[i][j][s_key])\n                        if (s_num < 0 || s_num > 1440) {\n                            continue\n                        }\n                        var e_num = this.timeToNum(this.durations[i][j][e_key])\n                        if (e_num < 0 || e_num > 1440) {\n                            continue\n                        }\n                        if (s_num >= e_num) {\n                            continue\n                        }\n                        var _duration = {}\n                        if (els.length > 0) {\n                            var pre = els[els.length - 1]\n                            var e_num_pre = this.timeToNum(pre[e_key])\n                            if (s_num < e_num_pre) {\n                                s_num = e_num_pre\n                            }\n                            if (join) {\n                                if (s_num == e_num_pre) {\n                                    els[els.length - 1][e_key] = this.numToTime(e_num)\n                                    continue\n                                }\n                            }\n                        }\n                        _duration[s_key] = this.numToTime(s_num)\n                        _duration[e_key] = this.numToTime(e_num)\n                        els.push(_duration)\n                    }\n                }\n                durationDatas.push(els)\n            }\n            this.durations = durationDatas\n        },\n        getPlan () {\n            this.checkPlanData(true)\n            // var plan = JSON.stringify(this.durations)\n            return this.durations\n        },\n        selectall () {\n            for (var i = 0; i < 7; i++) {\n                var el = []\n                var n = {}\n                n['s' + (i + 1)] = '00:00'\n                n['e' + (i + 1)] = '24:00'\n                el.push(n)\n                this.$set(this.durations, i, el)\n            }\n        },\n        unselectall () {\n            for (var i = 0; i < 7; i++) {\n                var el = []\n                this.$set(this.durations, i, el)\n            }\n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@base: #567;\n@base-active: darken(@base, 10%);\n@base-border: @base-active;\n@base-border-active: darken(@base-border, 10%);\n@base-light: lighten(@base, 10%);\n@siderWidth: 160px;\n@siderMenuHoverWidth: 130px;\n.plans {\n    font-size: 12px;\n    text-align: center;\n    border: 0;\n    width: 800px;\n    float: left;\n    background-color: #f7f7f7;\n    padding: 15px 50px 25px 20px;\n}\n\n.plan-week {\n    width: 10%;\n    height: 100%;\n    float: left;\n    background-color: #f7f7f7;\n    color: #646363;\n    line-height: 88px;\n    border: 0;\n}\n\n.plan-week:hover {\n    background-color: lighten(#f7f7f7, 10%);\n}\n\n.plan-hours {\n    width: 90%;\n    height: 100%;\n    float: left;\n    background-color: #f7f7f7;\n}\n\n.plan-title-num {\n    font-weight: bold;\n    height: 25% !important;\n    color: #7f7e7e;\n    background-color: #f7f7f7;\n    line-height: 20px !important;\n    width: 4.166%;\n    float: left;\n    font-size: 12px;\n    border-color: #eee;\n    border-style: none none none none;\n    text-align: right;\n}\n\n.plan-title-num-right {\n    margin-left: 2px;\n    margin-right: -2px;\n}\n\n.plan-title-num-left {\n    text-align: left !important;\n    margin-left: -10px;\n    padding-left: 5px;\n    margin-right: 10px;\n}\n\n.plan-title-line {\n    font-weight: bold;\n    height: 15% !important;\n    color: #dddddd;\n    background-color: #f7f7f7;\n    line-height: 14px !important;\n    width: 4.167%;\n    float: left;\n    font-size: 12px;\n    border-style: none none none none;\n    text-align: right;\n}\n\n.plan-title-line-left {\n    border-style: none none none solid !important;\n    border-color: #dddddd;\n    border-left-width: 1px;\n    margin-left: -0.4%;\n}\n\n.plan-day {\n    width: 100%;\n    height: 60%;\n    float: left;\n    background-color: white;\n    color: #eee;\n    line-height: 40px;\n    border: solid;\n    border-width: 1px;\n    border-color: #dddddd;\n    margin-left: -0.5%;\n}\n\n.plan-header {\n    font-weight: bold;\n    height: 24px !important;\n    color: #646363;\n    background-color: #f7f7f7 !important;\n    line-height: 24px !important;\n}\n\n.plan-header:hover {\n    background-color: lighten(#f7f7f7, 4%) !important;\n}\n\n.plan-row-header {\n    height: 24px;\n    width: 100%;\n}\n\n.plan-row {\n    height: 60px;\n    width: 100%;\n    border-top: 1px;\n    border-style: none;\n    border-color: #eee;\n}\n\n.plan-duration {\n    display: block;\n    height: 100%;\n    background-color: @base;\n    border-color: black;\n    border-style: none none none none;\n    font-size: 10px;\n    cursor: pointer;\n    float: left;\n    position: relative;\n}\n\n.plan-duration:hover {\n    background-color: @base-light;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecordPlan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecordPlan.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecordPlan.vue?vue&type=template&id=c2b20b52&scoped=true&\"\nimport script from \"./RecordPlan.vue?vue&type=script&lang=js&\"\nexport * from \"./RecordPlan.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecordPlan.vue?vue&type=style&index=0&id=c2b20b52&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c2b20b52\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}