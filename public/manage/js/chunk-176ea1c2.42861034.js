(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-176ea1c2"],{"0695":function(e,r,a){"use strict";a.r(r);var t,o,n=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("a-modal",{attrs:{title:e.title,width:780,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",{attrs:{form:e.form,layout:e.formLayout}},[a("div",{staticClass:"form-group"},[a("b-two-form-item",{attrs:{label:"姓名","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["truename",e.validatorRules.truename],expression:"['truename', validatorRules.truename]"}],attrs:{placeholder:""}})],1),a("b-two-form-item",{attrs:{label:"用户名","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname",{rules:[{required:!0,message:"请输入用户名!"},{validator:e.checkNickname}]}],expression:"[\n              'nickname',\n              {\n                rules: [{ required: true, message: '请输入用户名!' }, { validator: checkNickname }]\n              }\n            ]"}],attrs:{placeholder:"",disabled:null!=e.model,autocomplete:"off"}})],1)],1),a("div",{staticClass:"form-group"},[a("b-two-form-item",{attrs:{label:"邮箱地址","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:"请输入邮箱!"},{type:"email",message:"请输入正确的邮箱地址!"},{validator:e.checkEmail}]}],expression:"[\n              'email',\n              {\n                rules: [\n                  { required: true, message: '请输入邮箱!' },\n                  { type: 'email', message: '请输入正确的邮箱地址!' },\n                  { validator: checkEmail }\n                ]\n              }\n            ]"}],attrs:{disabled:null!=e.model,placeholder:"",autocomplete:"off"}})],1),a("b-two-form-item",{attrs:{label:"手机号","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["verifiedMobile",{rules:[{required:!0,message:"请输入手机号!"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号!"},{validator:e.checkMobile}]}],expression:"[\n              'verifiedMobile',\n              {\n                rules: [\n                  { required: true, message: '请输入手机号!' },\n                  { pattern: /^1[3456789]\\d{9}$/, message: '请输入正确的手机号!' },\n                  { validator: checkMobile }\n                ]\n              }\n            ]"}],attrs:{placeholder:"",autocomplete:"off"}})],1)],1),a("div",{staticClass:"form-group"},[a("b-two-form-item",{attrs:{label:"密码","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[null==e.model?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"},{validator:e.handlePass}]}],expression:"[\n              'password',\n              {\n                rules: [\n                  { required: true, message: '请输入密码' },\n                  {\n                    validator: handlePass\n                  }\n                ]\n              }\n            ]"}],attrs:{placeholder:"不填则不修改",name:"password",autocomplete:"off",type:"password"}}):a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{validator:e.handlePass}]}],expression:"[\n              'password',\n              {\n                rules: [\n                  {\n                    validator: handlePass\n                  }\n                ]\n              }\n            ]"}],attrs:{placeholder:"",name:"password",autocomplete:"new-password",type:"password"}})],1),a("b-two-form-item",{attrs:{label:"确认密码","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[null==e.model?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{rules:[{required:!0,message:"请输入确认密码"},{validator:e.handleConfirmPass}]}],expression:"[\n              'confirmPassword',\n              {\n                rules: [\n                  { required: true, message: '请输入确认密码' },\n                  {\n                    validator: handleConfirmPass\n                  }\n                ]\n              }\n            ]"}],attrs:{placeholder:"",autocomplete:"new-password",type:"password",name:"confirmPassword"}}):a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{rules:[{validator:e.handleConfirmPass}]}],expression:"[\n              'confirmPassword',\n              {\n                rules: [\n                  {\n                    validator: handleConfirmPass\n                  }\n                ]\n              }\n            ]"}],attrs:{placeholder:"",autocomplete:"off",type:"password",name:"confirmPassword"}})],1)],1),a("div",{staticClass:"form-group"},[a("b-two-form-item",{attrs:{label:"用户角色","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roles",e.validatorRules.roles],expression:"['roles', validatorRules.roles]"}],attrs:{mode:"tags",placeholder:"请选择角色"},on:{change:e.handleChange}},e._l(e.roleItems,(function(r,t){return a("a-select-option",{key:t,attrs:{value:r.code}},[e._v(" "+e._s(r.name)+" ")])})),1)],1)],1)])],1)],1)},s=[],l=a("1da1"),i=(a("96cf"),a("d3b7"),a("e572")),c=a("2ef0"),m=a("3af3"),u={name:"BTwoFormItem",extends:m["a"].Item,provide:function(){return{BTwoFormItem:this}},props:{prop:String},methods:{renderFormItem:function(){var e=m["a"].Item.methods.renderFormItem.bind(this).apply(void 0,arguments);return e.data.class="ant-form-item two-form-item",e}}},d=u,f=(a("f2c6"),a("2877")),p=Object(f["a"])(d,t,o,!1,null,"612cc6e2",null),v=p.exports,w=a("28de");function h(){return w["b"].get("role/items")}var b=a("44c4"),g=["truename","email","nickname","password","confirmPassword","verifiedMobile","roles"],k={props:{visible:{type:Boolean,default:!0},loading:{type:Boolean,default:function(){return!1}}},components:{BTwoFormItem:v},data:function(){return{title:"创建用户",formLayout:"inline",model:null,form:this.$form.createForm(this),validatorRules:{truename:{rules:[{required:!0,message:"请输入姓名!"}]},email:{rules:[{required:!0,message:"请输入邮箱!"},{type:"email",message:"请输入正确的邮箱地址!"}]},nickname:{rules:[{required:!0,message:"请输入用户名!"}]},verifiedMobile:{rules:[{required:!0,message:"请输入手机号!"},{pattern:i["g"].PHONE,message:"请输入正确的手机号!"}]},roles:{rules:[{required:!0,message:"请设置用户角色!"}]}},roleItems:[]}},created:function(){var e=this;g.forEach((function(r){return e.form.getFieldDecorator(r)})),this.$watch("model",(function(){e.model?e.$nextTick((function(){e.form.setFieldsValue(Object(c["pick"])(e.model,g))})):e.form.resetFields()}))},computed:{formItemLayout:function(){var e=this.formLayout;return"horizontal"===e?{labelCol:{span:4},wrapperCol:{span:14}}:{}},buttonItemLayout:function(){var e=this.formLayout;return"horizontal"===e?{wrapperCol:{span:14,offset:4}}:{}}},methods:{setFormData:function(){this.form.resetFields(),this.model=Object.assign({},this.model)},getUser:function(e){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(b["i"])(e);case 2:t=a.sent,r.model=t,r.setFormData();case 5:case"end":return a.stop()}}),a)})))()},getRoleItems:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,h();case 2:a=r.sent,e.roleItems=a;case 4:case"end":return r.stop()}}),r)})))()},handleChange:function(e){console.log("selected ".concat(e)),this.form.setFieldsValue({roles:"".concat(e)})},handleSubmit:function(e){var r=this;this.form.validateFields((function(e,a){console.log("err:",e),e||(console.log("Received values of form: ",a),r.$emit("ok"))}))},checkNickname:function(e,r,a){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.model&&a(),!r){e.next=6;break}return e.next=4,Object(b["c"])(r);case 4:o=e.sent,o&&0!=o.code?a(new Error(o.message)):a();case 6:case"end":return e.stop()}}),e)})))()},checkEmail:function(e,r,a){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.model&&a(),!r){e.next=6;break}return e.next=4,Object(b["a"])(r);case 4:o=e.sent,o&&0!=o.code?a(new Error(o.message)):a();case 6:case"end":return e.stop()}}),e)})))()},checkMobile:function(e,r,a){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return o=t.model?t.model.id:null,e.next=4,Object(b["b"])(r,o);case 4:n=e.sent,n&&0!=n.code?a(new Error(n.message)):a();case 6:case"end":return e.stop()}}),e)})))()},handlePass:function(e,r,a){var t=this.form;r&&this.confirmDirty&&t.validateFields(["confirmPassword"],{force:!0}),a()},handleConfirmPass:function(e,r,a){var t=this.form;r&&r!==t.getFieldValue("password")?a(new Error("两次输入密码不一致")):a()}},watch:{visible:function(e,r){e&&this.getRoleItems()}}},y=k,C=(a("f2ab"),Object(f["a"])(y,n,s,!1,null,"e55ec3ba",null));r["default"]=C.exports},e8c5:function(e,r,a){},ea53:function(e,r,a){},f2ab:function(e,r,a){"use strict";a("e8c5")},f2c6:function(e,r,a){"use strict";a("ea53")}}]);
//# sourceMappingURL=chunk-176ea1c2.42861034.js.map