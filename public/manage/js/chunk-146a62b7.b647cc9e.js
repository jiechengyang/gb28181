(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-146a62b7","chunk-fec557b4"],{"3f3e":function(e,r,t){"use strict";t("cb2a")},"65e2":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-modal",{attrs:{title:e.title,width:1200,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",e._b({ref:"recordPlanDialogForm",staticClass:"record-plan-form",attrs:{model:e.model,rules:e.rules}},"a-form-model",e.formItemLayout,!1),[t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.model.name,callback:function(r){e.$set(e.model,"name",r)},expression:"model.name"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"天数限制",prop:"limit_days",help:"保存近n天的录像"}},[t("a-input-number",{attrs:{min:1,max:50},model:{value:e.model.limit_days,callback:function(r){e.$set(e.model,"limit_days",r)},expression:"model.limit_days"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"空间大小限制(GB)",prop:"limit_space",help:"超过后：删除文件或停止录制"}},[t("a-input-number",{attrs:{min:.5,max:500},model:{value:e.model.limit_space,callback:function(r){e.$set(e.model,"limit_space",r)},expression:"model.limit_space"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"超出后停止计划",prop:"over_step_plan"}},[t("a-radio-group",{model:{value:e.model.over_step_plan,callback:function(r){e.$set(e.model,"over_step_plan",r)},expression:"model.over_step_plan"}},[t("a-radio-button",{attrs:{value:"delFile"}},[e._v("删除文件")]),t("a-radio-button",{attrs:{value:"stopDvr"}},[e._v("停止录制")])],1)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"是否启用",prop:"status"}},[t("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:e.model.status,callback:function(r){e.$set(e.model,"status",r)},expression:"model.status"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"计划描述",prop:"remark"}},[t("a-textarea",{attrs:{rows:2},model:{value:e.model.remark,callback:function(r){e.$set(e.model,"remark",r)},expression:"model.remark"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:4}},[t("div",{staticClass:"ant-form-item-label",staticStyle:{"padding-left":"72px"}},[t("label",{attrs:{for:""}},[e._v("计划明细")])])]),t("a-col",{attrs:{span:20}},[t("div",{staticClass:"ant-form-item-control-wrapper"},[t("record-plan",{ref:"recordPlan"})],1)])],1)],1)],1)],1)},n=[],o=(t("a9e3"),t("d3b7"),t("3ca3"),t("ddb0"),t("b0c0"),t("e9c4"),t("e5bf")),i=function(e,r,t){if(r){var a=Number(r);(a<1||a>30)&&t(new Error("只能保存1~30天的视频")),t()}t(new Error("只能保存1~30天的视频"))},l=function(e,r,t){if(r){var a=Number(r);(a<1||a>500)&&t(new Error("只能保存1~500GB的视频")),t()}t(new Error("只能保存1~500GB的视频"))},s={id:void 0,name:"",status:!0,remark:"",limit_space:1,limit_days:7,over_step_plan:"delFile",plan_ranges:[]},c={props:{visible:{type:Boolean,default:!0},loading:{type:Boolean,default:function(){return!1}}},components:{RecordPlan:function(){return t.e("chunk-466fb66b").then(t.bind(null,"99d5"))}},data:function(){return{title:"添加录像计划",model:Object.assign(s,{}),nvrItems:{},formItemLayout:{labelCol:{span:6},wrapperCol:{span:14}},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,message:"至少输入2个字符串长度的名称",trigger:"blur"}],limit_days:[{required:!0,message:"请输入天数限制",trigger:"blur"},{trigger:"change",validator:i}],limit_space:[{required:!0,message:"请输入空间大小限制",trigger:"blur"},{trigger:"change",validator:l}]}}},methods:{loadPlan:function(e){var r=this;Object(o["h"])(e).then((function(e){r.resetForm();var t=e.plan;r.model={id:t.id,name:t.name,status:t.status,remark:t.remark,limit_space:t.limit_space,limit_days:t.limit_days,over_step_plan:t.over_step_plan,plan_ranges:t.plan_ranges},r.initRecordPlan(JSON.stringify(r.model.plan_ranges))}))},resetForm:function(){var e=this;this.$nextTick((function(){e.$refs.recordPlanDialogForm&&e.$refs.recordPlanDialogForm.resetFields()})),this.model=Object.assign(s,{})},initRecordPlan:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$nextTick((function(){e.$refs.recordPlan.init(r)}))}}},d=c,m=(t("3f3e"),t("2877")),u=Object(m["a"])(d,a,n,!1,null,"13cc1b3c",null);r["default"]=u.exports},cb2a:function(e,r,t){},e5bf:function(e,r,t){"use strict";t.d(r,"j",(function(){return n})),t.d(r,"a",(function(){return o})),t.d(r,"e",(function(){return i})),t.d(r,"h",(function(){return l})),t.d(r,"d",(function(){return s})),t.d(r,"i",(function(){return c})),t.d(r,"f",(function(){return d})),t.d(r,"g",(function(){return m})),t.d(r,"k",(function(){return u})),t.d(r,"l",(function(){return p})),t.d(r,"b",(function(){return f})),t.d(r,"c",(function(){return b}));var a=t("28de");function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("record/plans",{params:e})}function o(e){return a["b"].promisePost("record/addPlan",e)}function i(e,r){return a["b"].promisePost("record/editPlan",r,{params:{id:e}})}function l(e){return a["b"].get("record/plan",{params:{id:e}})}function s(e){return a["b"].promisePost("record/delPlan",{id:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("record/planItems",{params:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("record/recordChannels",{params:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("record/files",{params:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["b"].get("record/summary",{params:e})}function p(e){return a["b"].promisePost("record/startPlayBack",{video_id:e})}function f(e){return a["b"].promisePost("record/closePlayBack",{video_id:e})}function b(e){return a["b"].promisePost("record/delPlayBack",{video_id:e})}}}]);
//# sourceMappingURL=chunk-146a62b7.b647cc9e.js.map